<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/lover.png"><script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?87d26d5dfc581ba7870114f705815bcd";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
      </script><title>node | Rain9</title><meta name="description" content="Rain9 的站点">
    <link rel="preload" href="/assets/style-774d2768.css" as="style"><link rel="stylesheet" href="/assets/style-774d2768.css">
    <link rel="modulepreload" href="/assets/app-f5876168.js"><link rel="modulepreload" href="/assets/node.html-54adf647.js"><link rel="modulepreload" href="/assets/node.html-e7e52c9c.js"><link rel="prefetch" href="/assets/index.html-72ba7cb0.js" as="script"><link rel="prefetch" href="/assets/about.html-99a6c80b.js" as="script"><link rel="prefetch" href="/assets/index.html-c62b406e.js" as="script"><link rel="prefetch" href="/assets/index.html-bb9155d0.js" as="script"><link rel="prefetch" href="/assets/dealData.html-97b7541c.js" as="script"><link rel="prefetch" href="/assets/js.html-9db977e4.js" as="script"><link rel="prefetch" href="/assets/leetcode.html-16cd28e3.js" as="script"><link rel="prefetch" href="/assets/lianbiao.html-079413c5.js" as="script"><link rel="prefetch" href="/assets/out.html-b54fdcf8.js" as="script"><link rel="prefetch" href="/assets/scene.html-3ed0617e.js" as="script"><link rel="prefetch" href="/assets/sort.html-74e43d1b.js" as="script"><link rel="prefetch" href="/assets/ES_new.html-32d6d64f.js" as="script"><link rel="prefetch" href="/assets/PWA.html-6ac8060c.js" as="script"><link rel="prefetch" href="/assets/index.html-9e05648c.js" as="script"><link rel="prefetch" href="/assets/Tailwind.html-b3c07fec.js" as="script"><link rel="prefetch" href="/assets/Webassembly.html-a6fd0bd1.js" as="script"><link rel="prefetch" href="/assets/cdn_rongcuo.html-96b977a8.js" as="script"><link rel="prefetch" href="/assets/first_paint.html-c2faed55.js" as="script"><link rel="prefetch" href="/assets/flutter.html-22eb007a.js" as="script"><link rel="prefetch" href="/assets/huancun.html-f9e06d3d.js" as="script"><link rel="prefetch" href="/assets/js.html-a0b1a2c4.js" as="script"><link rel="prefetch" href="/assets/jsBridge.html-8f69fced.js" as="script"><link rel="prefetch" href="/assets/lajihuishou.html-b5dc7efd.js" as="script"><link rel="prefetch" href="/assets/liulanqixuanran.html-dfdc342a.js" as="script"><link rel="prefetch" href="/assets/log_sdk.html-5daa8e45.js" as="script"><link rel="prefetch" href="/assets/logcenter.html-ea3a722f.js" as="script"><link rel="prefetch" href="/assets/luyin.html-0cdc87a5.js" as="script"><link rel="prefetch" href="/assets/mail.html-4d20b67c.js" as="script"><link rel="prefetch" href="/assets/minprogram.html-1faebfc9.js" as="script"><link rel="prefetch" href="/assets/react.html-4e90cbe5.js" as="script"><link rel="prefetch" href="/assets/taro.html-efb0a56a.js" as="script"><link rel="prefetch" href="/assets/tauri.html-36a91cee.js" as="script"><link rel="prefetch" href="/assets/video.html-9a0e120d.js" as="script"><link rel="prefetch" href="/assets/vite.html-dd945444.js" as="script"><link rel="prefetch" href="/assets/webpack.html-b9d1d460.js" as="script"><link rel="prefetch" href="/assets/xiaochengxuzhibo.html-26f7d518.js" as="script"><link rel="prefetch" href="/assets/yidongduanshipei.html-bca49705.js" as="script"><link rel="prefetch" href="/assets/ElasticSearch.html-79a48e57.js" as="script"><link rel="prefetch" href="/assets/PostgreSQL.html-8d814104.js" as="script"><link rel="prefetch" href="/assets/index.html-0672f7ed.js" as="script"><link rel="prefetch" href="/assets/gateway.html-edbf4f5e.js" as="script"><link rel="prefetch" href="/assets/git.html-1cc957b6.js" as="script"><link rel="prefetch" href="/assets/go.html-59e3aa4d.js" as="script"><link rel="prefetch" href="/assets/next.html-2888343b.js" as="script"><link rel="prefetch" href="/assets/nuxt.html-470ed30d.js" as="script"><link rel="prefetch" href="/assets/rust.html-0c5e789b.js" as="script"><link rel="prefetch" href="/assets/base.html-e86f186e.js" as="script"><link rel="prefetch" href="/assets/me.html-9d5b2ac2.js" as="script"><link rel="prefetch" href="/assets/mian.html-ebb6da48.js" as="script"><link rel="prefetch" href="/assets/zj.html-576d7d35.js" as="script"><link rel="prefetch" href="/assets/day1.html-c9799af8.js" as="script"><link rel="prefetch" href="/assets/day2.html-3fbdc8a3.js" as="script"><link rel="prefetch" href="/assets/day3.html-8e1ba848.js" as="script"><link rel="prefetch" href="/assets/day4.html-73f94336.js" as="script"><link rel="prefetch" href="/assets/day5.html-eb793bb2.js" as="script"><link rel="prefetch" href="/assets/index.html-4c82fab8.js" as="script"><link rel="prefetch" href="/assets/index.html-53329b57.js" as="script"><link rel="prefetch" href="/assets/study01.html-a211f63d.js" as="script"><link rel="prefetch" href="/assets/index.html-7093baaf.js" as="script"><link rel="prefetch" href="/assets/webgis.html-f29beefa.js" as="script"><link rel="prefetch" href="/assets/webgl.html-33c58c4f.js" as="script"><link rel="prefetch" href="/assets/English.html-01d09dce.js" as="script"><link rel="prefetch" href="/assets/index.html-83963ff5.js" as="script"><link rel="prefetch" href="/assets/caozuoxitong.html-a2248d63.js" as="script"><link rel="prefetch" href="/assets/math.html-44c8dc83.js" as="script"><link rel="prefetch" href="/assets/zhengzhi.html-4ee17732.js" as="script"><link rel="prefetch" href="/assets/zhuanye.html-4d4b7184.js" as="script"><link rel="prefetch" href="/assets/list.html-f3b61419.js" as="script"><link rel="prefetch" href="/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/assets/index.html-9f6fc264.js" as="script"><link rel="prefetch" href="/assets/about.html-17083d70.js" as="script"><link rel="prefetch" href="/assets/index.html-80aac332.js" as="script"><link rel="prefetch" href="/assets/index.html-27cf5dd5.js" as="script"><link rel="prefetch" href="/assets/dealData.html-59321520.js" as="script"><link rel="prefetch" href="/assets/js.html-365d9386.js" as="script"><link rel="prefetch" href="/assets/leetcode.html-eaa46b73.js" as="script"><link rel="prefetch" href="/assets/lianbiao.html-bea0df9f.js" as="script"><link rel="prefetch" href="/assets/out.html-69b9b8ae.js" as="script"><link rel="prefetch" href="/assets/scene.html-76a1c684.js" as="script"><link rel="prefetch" href="/assets/sort.html-afc946fd.js" as="script"><link rel="prefetch" href="/assets/ES_new.html-ee1adb87.js" as="script"><link rel="prefetch" href="/assets/PWA.html-58cdc459.js" as="script"><link rel="prefetch" href="/assets/index.html-b917fcda.js" as="script"><link rel="prefetch" href="/assets/Tailwind.html-d24e62e4.js" as="script"><link rel="prefetch" href="/assets/Webassembly.html-15a87d3c.js" as="script"><link rel="prefetch" href="/assets/cdn_rongcuo.html-6656d236.js" as="script"><link rel="prefetch" href="/assets/first_paint.html-c493cdba.js" as="script"><link rel="prefetch" href="/assets/flutter.html-079c6bf5.js" as="script"><link rel="prefetch" href="/assets/huancun.html-a4fbaa09.js" as="script"><link rel="prefetch" href="/assets/js.html-cd910301.js" as="script"><link rel="prefetch" href="/assets/jsBridge.html-1bd1018e.js" as="script"><link rel="prefetch" href="/assets/lajihuishou.html-9a83413d.js" as="script"><link rel="prefetch" href="/assets/liulanqixuanran.html-d10b6702.js" as="script"><link rel="prefetch" href="/assets/log_sdk.html-28b46ff3.js" as="script"><link rel="prefetch" href="/assets/logcenter.html-5e555469.js" as="script"><link rel="prefetch" href="/assets/luyin.html-8bbcc17a.js" as="script"><link rel="prefetch" href="/assets/mail.html-de7f0a6d.js" as="script"><link rel="prefetch" href="/assets/minprogram.html-d0f505b5.js" as="script"><link rel="prefetch" href="/assets/react.html-991b60a9.js" as="script"><link rel="prefetch" href="/assets/taro.html-28fc4489.js" as="script"><link rel="prefetch" href="/assets/tauri.html-3e2e81a3.js" as="script"><link rel="prefetch" href="/assets/video.html-e586783c.js" as="script"><link rel="prefetch" href="/assets/vite.html-142a0be8.js" as="script"><link rel="prefetch" href="/assets/webpack.html-e3d1134d.js" as="script"><link rel="prefetch" href="/assets/xiaochengxuzhibo.html-3be7366f.js" as="script"><link rel="prefetch" href="/assets/yidongduanshipei.html-d96f9380.js" as="script"><link rel="prefetch" href="/assets/ElasticSearch.html-965813cb.js" as="script"><link rel="prefetch" href="/assets/PostgreSQL.html-d5106734.js" as="script"><link rel="prefetch" href="/assets/index.html-95a00cd1.js" as="script"><link rel="prefetch" href="/assets/gateway.html-312b1357.js" as="script"><link rel="prefetch" href="/assets/git.html-0023e0be.js" as="script"><link rel="prefetch" href="/assets/go.html-e1c5f2aa.js" as="script"><link rel="prefetch" href="/assets/next.html-398dbc5b.js" as="script"><link rel="prefetch" href="/assets/nuxt.html-737e4d52.js" as="script"><link rel="prefetch" href="/assets/rust.html-9ec5ba35.js" as="script"><link rel="prefetch" href="/assets/base.html-8b568541.js" as="script"><link rel="prefetch" href="/assets/me.html-c1885935.js" as="script"><link rel="prefetch" href="/assets/mian.html-364995f7.js" as="script"><link rel="prefetch" href="/assets/zj.html-eabd729f.js" as="script"><link rel="prefetch" href="/assets/day1.html-21d0d57d.js" as="script"><link rel="prefetch" href="/assets/day2.html-adb3400b.js" as="script"><link rel="prefetch" href="/assets/day3.html-c9d4cc5c.js" as="script"><link rel="prefetch" href="/assets/day4.html-d2e1e363.js" as="script"><link rel="prefetch" href="/assets/day5.html-fc38f6a9.js" as="script"><link rel="prefetch" href="/assets/index.html-7483772e.js" as="script"><link rel="prefetch" href="/assets/index.html-f54aa6b0.js" as="script"><link rel="prefetch" href="/assets/study01.html-4988875c.js" as="script"><link rel="prefetch" href="/assets/index.html-892f37bd.js" as="script"><link rel="prefetch" href="/assets/webgis.html-926c0133.js" as="script"><link rel="prefetch" href="/assets/webgl.html-f8d34ed6.js" as="script"><link rel="prefetch" href="/assets/English.html-edecd13e.js" as="script"><link rel="prefetch" href="/assets/index.html-0e5a5333.js" as="script"><link rel="prefetch" href="/assets/caozuoxitong.html-46f42ab2.js" as="script"><link rel="prefetch" href="/assets/math.html-8bc5f16f.js" as="script"><link rel="prefetch" href="/assets/zhengzhi.html-16fe2657.js" as="script"><link rel="prefetch" href="/assets/zhuanye.html-ec9b1190.js" as="script"><link rel="prefetch" href="/assets/list.html-79acf96e.js" as="script"><link rel="prefetch" href="/assets/404.html-c606cb01.js" as="script"><link rel="prefetch" href="/assets/AiNav-445f24f9.js" as="script"><link rel="prefetch" href="/assets/AiToolsHome-c084aafe.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/lover.png" alt="Rain9"><span class="site-name can-hide">Rain9</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/frontend/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/backend/" class="router-link-active" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/algorithm/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/webgl/" class="" aria-label="WebGL"><!--[--><!--]--> WebGL <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/web3/" class="" aria-label="Web3"><!--[--><!--]--> Web3 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/vim/" class="" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rain9 的博客"><span class="title">Rain9 的博客</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rain9 的博客"><span class="title">Rain9 的博客</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/RainyNight9" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/1943592288391496/posts" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://mp.weixin.qq.com/s/kFGRxEwoWiXDgUC_D8mgnQ" rel="noopener noreferrer" target="_blank" aria-label="公众号"><!--[--><!--]--> 公众号 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/frontend/" class="" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/backend/" class="router-link-active" aria-label="后端"><!--[--><!--]--> 后端 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/algorithm/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/webgl/" class="" aria-label="WebGL"><!--[--><!--]--> WebGL <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/web3/" class="" aria-label="Web3"><!--[--><!--]--> Web3 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blogs/vim/" class="" aria-label="Vim"><!--[--><!--]--> Vim <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Rain9 的博客"><span class="title">Rain9 的博客</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Rain9 的博客"><span class="title">Rain9 的博客</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/RainyNight9" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/1943592288391496/posts" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://mp.weixin.qq.com/s/kFGRxEwoWiXDgUC_D8mgnQ" rel="noopener noreferrer" target="_blank" aria-label="公众号"><!--[--><!--]--> 公众号 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">node <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blogs/backend/node.html#介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blogs/backend/node.html#node-是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="node 是什么"><!--[--><!--]--> node 是什么 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#node-优势" class="router-link-active router-link-exact-active sidebar-item" aria-label="node 优势"><!--[--><!--]--> node 优势 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#应用场景" class="router-link-active router-link-exact-active sidebar-item" aria-label="应用场景"><!--[--><!--]--> 应用场景 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#在线环境" class="router-link-active router-link-exact-active sidebar-item" aria-label="在线环境"><!--[--><!--]--> 在线环境 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#node-js-的版本管理工具" class="router-link-active router-link-exact-active sidebar-item" aria-label="Node.js 的版本管理工具"><!--[--><!--]--> Node.js 的版本管理工具 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blogs/backend/node.html#相关-npm" class="router-link-active router-link-exact-active sidebar-item" aria-label="相关 npm"><!--[--><!--]--> 相关 npm <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blogs/backend/node.html#npm-镜像源配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="npm 镜像源配置"><!--[--><!--]--> npm 镜像源配置 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blogs/backend/node.html#相关-npx" class="router-link-active router-link-exact-active sidebar-item" aria-label="相关 npx"><!--[--><!--]--> 相关 npx <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#模块系统" class="router-link-active router-link-exact-active sidebar-item" aria-label="模块系统"><!--[--><!--]--> 模块系统 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blogs/backend/node.html#commonjs" class="router-link-active router-link-exact-active sidebar-item" aria-label="CommonJS"><!--[--><!--]--> CommonJS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#es-modules" class="router-link-active router-link-exact-active sidebar-item" aria-label="ES Modules"><!--[--><!--]--> ES Modules <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#cjs-和-esm-区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="CJS 和 ESM 区别"><!--[--><!--]--> CJS 和 ESM 区别 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blogs/backend/node.html#常用的内置模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用的内置模块"><!--[--><!--]--> 常用的内置模块 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blogs/backend/node.html#global-全局对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="global 全局对象"><!--[--><!--]--> global 全局对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#path-路径处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="path 路径处理"><!--[--><!--]--> path 路径处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#fs-文件系统" class="router-link-active router-link-exact-active sidebar-item" aria-label="fs 文件系统"><!--[--><!--]--> fs 文件系统 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#util-工具" class="router-link-active router-link-exact-active sidebar-item" aria-label="util 工具"><!--[--><!--]--> util 工具 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#http-https" class="router-link-active router-link-exact-active sidebar-item" aria-label="http / https"><!--[--><!--]--> http / https <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#child-process" class="router-link-active router-link-exact-active sidebar-item" aria-label="child_process"><!--[--><!--]--> child_process <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#url" class="router-link-active router-link-exact-active sidebar-item" aria-label="url"><!--[--><!--]--> url <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#timers" class="router-link-active router-link-exact-active sidebar-item" aria-label="Timers"><!--[--><!--]--> Timers <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#readline" class="router-link-active router-link-exact-active sidebar-item" aria-label="Readline"><!--[--><!--]--> Readline <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#crypto" class="router-link-active router-link-exact-active sidebar-item" aria-label="crypto"><!--[--><!--]--> crypto <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blogs/backend/node.html#node-中的-event-loop" class="router-link-active router-link-exact-active sidebar-item" aria-label="node 中的 Event Loop"><!--[--><!--]--> node 中的 Event Loop <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blogs/backend/node.html#_6-个阶段" class="router-link-active router-link-exact-active sidebar-item" aria-label="6 个阶段"><!--[--><!--]--> 6 个阶段 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blogs/backend/node.html#_2-个微任务队列" class="router-link-active router-link-exact-active sidebar-item" aria-label="2 个微任务队列"><!--[--><!--]--> 2 个微任务队列 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blogs/backend/node.html#ts-支持" class="router-link-active router-link-exact-active sidebar-item" aria-label="ts 支持"><!--[--><!--]--> ts 支持 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="node" tabindex="-1"><a class="header-anchor" href="#node" aria-hidden="true">#</a> node</h1><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><p>语言可以分为两类：<code>编译型</code>和<code>解释型</code>。</p><table><thead><tr><th>类型</th><th>代表</th><th>特点</th></tr></thead><tbody><tr><td>编译型</td><td>C、C++、Go、Java、C#</td><td><code>执行前</code>：需要将源代码转换为机器语言（二进制代码），并生成可执行文件。<code>运行时</code>：计算机无需对源代码进行翻译，而是直接执行可执行文件。</td></tr><tr><td>解释型</td><td>Python、PHP、JavaScript</td><td><code>执行前</code>：不需要编译，直接执行源代码。<code>运行时</code>：解释器将源代码转换为机器语言并执行。</td></tr></tbody></table><p>其中 JavaScript 就是一门解释型语言，因此在运行时需要一个解释器。</p><p>在浏览器中，通常使用浏览器自带的解释器来执行 JavaScript 代码，而在服务端中，由于缺少浏览器的支持，所以需要一个特定的运行时环境来承载 JavaScript 代码的执行，这个时候就该 Node.js 登场了。</p><h3 id="node-是什么" tabindex="-1"><a class="header-anchor" href="#node-是什么" aria-hidden="true">#</a> node 是什么</h3><blockquote><p>Node.js® 是一个开源、跨平台的 JavaScript 运行时环境。</p></blockquote><p>Node.js 最初是由 Ryan Dahl 基于 <code>Chrome V8</code> 引擎开发的一个的 <code>JavaScript 运行时环境</code>，在 2009 年被首次发布。</p><p>V8 则是谷歌的开源高性能 <code>JavaScript 和 WebAssembly 引擎</code>，使用 C++ 编写。</p><h3 id="node-优势" tabindex="-1"><a class="header-anchor" href="#node-优势" aria-hidden="true">#</a> node 优势</h3><ul><li>高性能：基于事件驱动的非阻塞 I/O 模型，单线程也能够处理大量并发请求；</li><li>跨平台：可以运行在不同操作系统上；</li><li>社区完备：Node.js有一个庞大的社区，有丰富的文档和开源项目沉淀；</li><li>易上手：学习门槛低，环境配置简单，开发&amp;部署迅速。</li></ul><h3 id="应用场景" tabindex="-1"><a class="header-anchor" href="#应用场景" aria-hidden="true">#</a> 应用场景</h3><ul><li>服务端开发：Express、Koa、Midway、Egg；</li><li>桌面应用：Electron、NW.js、线上应用 VS Code、飞书、新版 QQ；</li><li>移动应用：React Native、Weex；</li><li>Web 开发：Vue、React、Svelte 等前端框架</li><li>构建工具：webpack、Vite、Rollup；</li><li>CLI 工具：前端开发者常用的各种项目脚手架和工具，如：nodemon、whistle、http-server；</li></ul><h3 id="在线环境" tabindex="-1"><a class="header-anchor" href="#在线环境" aria-hidden="true">#</a> 在线环境</h3><table><thead><tr><th>平台</th><th>Node版本</th><th>访问速度</th><th>IDE环境</th><th>支持分享</th></tr></thead><tbody><tr><td><a href="https://code.juejin.cn/" target="_blank" rel="noopener noreferrer">码上掘金<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>16</td><td>⭐️⭐️⭐️</td><td>❌</td><td>✅</td></tr><tr><td><a href="https://runkit.com/home" target="_blank" rel="noopener noreferrer">RunKit<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>多版本(14/16/18 etc.)</td><td>⭐️⭐️⭐️</td><td>❌</td><td>✅</td></tr><tr><td><a href="https://replit.com/languages/nodejs" target="_blank" rel="noopener noreferrer">Repl.it<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>12</td><td>⭐️⭐️</td><td>✅</td><td>✅</td></tr><tr><td><a href="https://codesandbox.io/" target="_blank" rel="noopener noreferrer">CodeSandBox<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>16</td><td>⭐️</td><td>✅</td><td>✅</td></tr><tr><td><a href="https://stackblitz.com/" target="_blank" rel="noopener noreferrer">StackBlitz<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>16</td><td>⭐️⭐️</td><td>✅</td><td>✅</td></tr></tbody></table><h3 id="node-js-的版本管理工具" tabindex="-1"><a class="header-anchor" href="#node-js-的版本管理工具" aria-hidden="true">#</a> Node.js 的版本管理工具</h3><ul><li><a href="https://github.com/nvm-sh/nvm#intro" target="_blank" rel="noopener noreferrer">nvm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：基于 Shell 脚本实现，老牌的 Node.js 包管理工具；</li><li><a href="https://github.com/Schniz/fnm" target="_blank" rel="noopener noreferrer">fnm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：快速简便的 Node.js 版本管理器，使用 Rust 编写；</li><li><a href="https://github.com/volta-cli/volta" target="_blank" rel="noopener noreferrer">volta<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：快速无缝地安装和运行任何 JS 工具！Volta 是在 Rust 中构建的，并作为一个快速的静态二进制运行。</li></ul><p><em><strong>推荐 volta</strong></em></p><p>一键安装脚本。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> https://get.volta.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>① 安装目标版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>volta <span class="token function">install</span> node@18.16.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>② 查看已安装版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>volta list <span class="token function">node</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>③ 切换版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>volta <span class="token function">install</span> node@<span class="token punctuation">[</span>version<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="相关-npm" tabindex="-1"><a class="header-anchor" href="#相关-npm" aria-hidden="true">#</a> 相关 npm</h2><blockquote><p>NPM (Node.js Package Manager) 是 Node.js 的包管理工具，它可以方便地安装、更新、卸载和管理开发中需要用到的各种包和模块。</p></blockquote><h3 id="npm-镜像源配置" tabindex="-1"><a class="header-anchor" href="#npm-镜像源配置" aria-hidden="true">#</a> npm 镜像源配置</h3><p>我个人推荐 <a href="https://github.com/Pana/nrm" target="_blank" rel="noopener noreferrer">nrm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> nrm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ nrm <span class="token function">ls</span>

* <span class="token function">npm</span> ---------- https://registry.npmjs.org/
  <span class="token function">yarn</span> --------- https://registry.yarnpkg.com/
  tencent ------ https://mirrors.cloud.tencent.com/npm/
  cnpm --------- https://r.cnpmjs.org/
  taobao ------- https://registry.npmmirror.com/
  npmMirror ---- https://skimdb.npmjs.com/registry/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ nrm use cnpm  //switch registry to cnpm

    Registry has been <span class="token builtin class-name">set</span> to: http://r.cnpmjs.org/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="相关-npx" tabindex="-1"><a class="header-anchor" href="#相关-npx" aria-hidden="true">#</a> 相关 npx</h2><blockquote><p>npx 是随 Node.js 安装附带的另一个指令，可以更方便的调用 Node.js 生态中的包 (通常是一些 Node CLI 工具)，</p></blockquote><p>使用 npx，可以在不全局安装一个命令行工具的情况下直接运行它，同时也不会污染全局环境。</p><p>比如 nodemon 这个 CLI 工具，可以在开发时替代 node 指令执行 js 文件，文件修改后自动重新执行。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 直接通过npx 调用执行</span>
npx nodemon test.js

<span class="token comment"># 等价于</span>
<span class="token comment"># ① 全局安装CLI工具</span>
<span class="token function">npm</span> i <span class="token parameter variable">-g</span> nodemon
<span class="token comment"># ② 调用执行</span>
nodemon test.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="模块系统" tabindex="-1"><a class="header-anchor" href="#模块系统" aria-hidden="true">#</a> 模块系统</h2><blockquote><p>模块系统是指代码组织结构的一种模式，通过模块化的方式将代码分为独立的模块，以提高代码<code>复用性和可维护性</code>。模块系统使得大型应用程序可以被分解成小的、独立的部分，每个部分解决一个特定的问题这样做既有助于协同开发大型应用，也能够使得交付的应用程序体积更加小巧。</p></blockquote><p><code>CommonJS、AMD、CMD、UMD、ESM</code> 等模块化标准。</p><h3 id="commonjs" tabindex="-1"><a class="header-anchor" href="#commonjs" aria-hidden="true">#</a> CommonJS</h3><blockquote><p>CommonJS 是一种 JavaScript 环境中模块化编程的规范。它定义了一套模块化导入和导出的语法和机制，旨在解决 JavaScript 在模块化方面的缺陷。</p></blockquote><p>CJS 模块使用 <code>require 和 module.exports</code> 实现导入和导出。</p><p>在 Node.js 中，<code>module.exports 和 exports</code> 都可用于导出 Node.js 模块中的代码的对象。</p><p>通常情况下，我们只会使用 <code>module.exports 或 exports</code> 其中的一个导出模块代码，它们之间有一些微妙的区别。</p><p><code>exports</code> 实际上是 <code>module.exports</code> 的一个引用，当我们使用 <code>exports</code> 导出模块代码时，实际上是在向 <code>module.exports</code> 添加属性，如下所示：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导出一个名为 &quot;hello&quot; 的函数到 &quot;exports&quot; 对象中</span>
<span class="token comment">// 函数中会将 &quot;Hello World!&quot; 的信息输出到控制台中</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这等价于：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 导出一个名为 &quot;hello&quot; 的函数到 &quot;exports&quot; 对象中</span>
<span class="token comment">// 函数中会将 &quot;Hello World!&quot; 的信息输出到控制台中</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是，如果我们对 exports 进行重新赋值，就会打破这个关系，如下所示：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 定义一个名为 &quot;exports&quot; 的函数 </span>
<span class="token comment">// 函数中将 &quot;Hello World!&quot; 的信息输出到控制台中 </span>
<span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这时 exports 就不再指向 module.exports，而是指向了一个新的对象，原来的 module.exports 对象将会被忽略，因此该模块将不会导出任何内容。</p><p>因此，建议在写 Node.js 模块时，只使用 <code>module.exports</code> 导出模块代码，而不要使用 <code>exports</code>。如果你需要向外部导出多个函数或对象，可以将它们作为 <code>module.exports</code> 的属性导出。</p><h3 id="es-modules" tabindex="-1"><a class="header-anchor" href="#es-modules" aria-hidden="true">#</a> ES Modules</h3><p>是在 ECMAScript 6 (ES2015/ES6) 中引入的一项重要特性，旨在取代 CommonJS 和 AMD 规范，成为 JavaScript 模块化的主要标准。</p><p>ESM 模块的导入使用 <code>import</code> 关键字，导出使用 <code>export</code> 关键字。</p><p>默认情况下 Node.js 会将 <code>.js</code> 后缀文件识别为 <code>CJS 模块</code>。</p><p>要让 Node.js 正确识别，主要有两种方式：</p><ul><li>使用 <code>.mjs</code> 作为文件后缀名 (例如 hello.mjs)；</li><li>package.json 中 <code>type</code> 字段设置为 <code>module</code>。</li></ul><p>ES Modules 中的导入导出有多种用法，主要介绍了以下 4 种使用场景：</p><ul><li>默认导入导出 (<code>export default，import xx from &#39;module&#39;</code>)；</li><li>具名导入导出 (<code>export xx，import { xx } from &#39;module&#39;</code>)；</li><li>导入导出所有 (<code>export *，import * as xx from &#39;module&#39;</code>)；</li><li>重新导出 (<code>export { xx } from &#39;module&#39;，export * from &#39;module&#39;</code>)。</li></ul><p>将 ESM 模块转换为 CJS 模块的工具，<code>tsup 和 ncc</code>。</p><h3 id="cjs-和-esm-区别" tabindex="-1"><a class="header-anchor" href="#cjs-和-esm-区别" aria-hidden="true">#</a> CJS 和 ESM 区别</h3><h4 id="模块加载时机" tabindex="-1"><a class="header-anchor" href="#模块加载时机" aria-hidden="true">#</a> 模块加载时机</h4><ul><li>CJS 支持动态加载模块 (require 语句可以出现在任意位置)；</li><li>ESM 会在所有模块都加载完毕后才执行代码 (通常会将 import 导入语句放在模块的顶部)； <ul><li>ESM 是静态解析的，它会在编译时首先解析模块中的导入语句，虽然通常会将导入语句放在模块的顶部，但并不是要求所有的 import 语句必须在文件顶部，只要在使用导入的内容之前进行导入即可。</li></ul></li></ul><p>因此 ESM 可以在代码执行前进行静态分析和优化，从而提高性能 (比如自动移除无用的死代码)。</p><p>而 CJS 需要等到代码运行时才能确定依赖关系和加载模块。</p><h4 id="导出内容的区别" tabindex="-1"><a class="header-anchor" href="#导出内容的区别" aria-hidden="true">#</a> 导出内容的区别</h4><p>在 ESM 中，当我们导入一个变量时，实际上是导入了该变量的引用。这意味着，如果导出的变量在导入模块中发生了改变，导入的变量也会随之改变。</p><p>而在 CommonJS 中，导入的是导出模块的值的拷贝，而不是引用。这意味着，即使导出模块中的值发生了改变，导入模块中导入的变量不会受到影响。</p><p>简而言之，<code>ESM 导入的是值的引用，而 CJS 导入的是值的拷贝。</code></p><h4 id="文件命名" tabindex="-1"><a class="header-anchor" href="#文件命名" aria-hidden="true">#</a> 文件命名</h4><p>通常情况下模块一般都以 <code>.js</code> 结尾，通过 <code>package.json</code> 中 <code>&quot;type&quot;:&quot;module&quot;</code> 区分模块类型，</p><p>实际上还可以通过文件命名来区分 <code>.cjs</code> 表明是 <code>CJS</code> 规范的模块，<code>.mjs</code> 表明是 <code>ESM</code> 规范的模块。</p><h2 id="常用的内置模块" tabindex="-1"><a class="header-anchor" href="#常用的内置模块" aria-hidden="true">#</a> 常用的内置模块</h2><h3 id="global-全局对象" tabindex="-1"><a class="header-anchor" href="#global-全局对象" aria-hidden="true">#</a> global 全局对象</h3><p>JavaScript 中存在一个特殊的全局对象，可以在任意位置被访问，通常用 <code>globalThis</code> 指代。</p><p>在浏览器中，指向 <code>window</code> 这个全局对象，而 Node.js 中指向 <code>global</code>。</p><p>特殊的全局变量：</p><ul><li><code>__filename</code> 表示当前正在执行的脚本文件的绝对路径。</li><li><code>__dirname</code> 表示当前执行脚本所在目录的绝对路径。</li></ul><p>这 2 个变量，只在 <code>CJS</code> 模块下存在，如果是 <code>ESM</code> 将会出现以下的报错信息。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fileURLToPath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;url&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> dirname <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span>

<span class="token keyword">const</span> __filename <span class="token operator">=</span> <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
<span class="token keyword">const</span> __dirname <span class="token operator">=</span> <span class="token function">dirname</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="process" tabindex="-1"><a class="header-anchor" href="#process" aria-hidden="true">#</a> process</h4><p><code>process.argv</code> 返回一个数组，包含启动 Node.js 进程时传递的命令行参数。</p><p><code>process.cwd()</code> 获取当前工作目录的绝对路径。</p><p><code>p<wbr>rocess.env</code> 获取当前执行环境的环境变量 (对象形式)。</p><p><code>process.version</code> 获取当前 Node 版本。</p><p><code>process.exit([code])</code>：终止 Node.js 进程，如果指定了 code 参数，则使用该参数作为退出状态码。</p><p><code>process.pid</code>：返回进程的 PID (进程 ID)；</p><p><code>process.platform</code>：返回运行 Node.js 的操作系统平台；</p><p><code>process.arch</code>：获取 CPU 架构信息。</p><p><code>process.stdout</code>：标准输出流，常用 <code>process.stdout.write</code> 进行数据写入。</p><p><code>process.stdin</code>：用于从标准输入流 (stdin) 读取数据。</p><h4 id="buffer" tabindex="-1"><a class="header-anchor" href="#buffer" aria-hidden="true">#</a> Buffer</h4><p>Buffer 用于处理二进制数据。类似于数组，并提供了一些方便的方法来操作二进制数据。</p><p>① 创建 Buffer 对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个大小为 10 的 Buffer 对象，默认会用 0 填充</span>
<span class="token keyword">const</span> buf2 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, world!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个包含字符串 &#39;Hello, world!&#39; 的 Buffer 对象</span>
<span class="token keyword">const</span> buf3 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0x68</span><span class="token punctuation">,</span> <span class="token number">0x65</span><span class="token punctuation">,</span> <span class="token number">0x6c</span><span class="token punctuation">,</span> <span class="token number">0x6c</span><span class="token punctuation">,</span> <span class="token number">0x6f</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 内容为hello构成的16进制数组 Buffer 对象 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 转换内容格式</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, world!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 转为字符串输出</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &#39;Hello, world!&#39;</span>

<span class="token comment">// 转为16进制字符串输出</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&#39;hex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &#39;48656c6c6f2c20776f726c6421&#39;（对应的是 &#39;Hello, world!&#39; 的 ASCII 码）</span>

<span class="token comment">// 转为数组输出</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 [</span>
<span class="token comment">//    72, 101, 108, 108, 111,</span>
<span class="token comment">//    44,  32, 119, 111, 114,</span>
<span class="token comment">//   108, 100,  33</span>
<span class="token comment">// ]</span>

<span class="token comment">// 转为base64格式输出</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&#39;base64&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &#39;SGVsbG8sIHdvcmxkIQ==&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>③ 写入内容</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建一个长度为 10 的 Buffer 实例并将它填充为 0</span>
<span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将字符串 &#39;Hello&#39; 写入 Buffer 实例的前 5 个字节</span>
buf<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;Hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将字符串 &#39;world&#39; 写入 Buffer 实例的第 6 个字节开始的位置，由于 &#39;world&#39; 的长度为 5，所以不会覆盖掉之前写入的 &#39;Hello&#39;</span>
buf<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// 将 Buffer 实例转换为字符串并输出 &#39;Hello world&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>④ 合并多个 Buffer 对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> buf1 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;Hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> buf2 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;World&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> buf3 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>buf1<span class="token punctuation">,</span> buf2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &#39;HelloWorld&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⑤ 截取 Buffer 对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, world!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> buf2 <span class="token operator">=</span> buf<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &#39;Hello&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="path-路径处理" tabindex="-1"><a class="header-anchor" href="#path-路径处理" aria-hidden="true">#</a> path 路径处理</h3><p><code>path.join</code> 将多个路径拼接成一个相对路径 (或绝对路径，取决于第一个路径是否为根路径)。</p><p><code>path.resolve</code> 将多个路径拼接成一个绝对路径，返回一个解析后的绝对路径。即如果传入相对路径，会以当前工作目录为基准，计算出绝对路径，如果传入了绝对路径，则以传入的绝对路径为基准。</p><p><code>path.dirname</code> 返回路径中的目录名。</p><p><code>path.basename</code> 返回路径中的文件名，并可选地去除给定的文件扩展名。</p><p><code>path.extname</code> 获取路径中的文件扩展名。</p><p><code>path.normalize</code> 主要用于规范化路径，将路径中的不规范部分调整为标准格式，可以用于处理以下问题：</p><ul><li>路径中的斜杠数量过多的情况。</li><li>路径中存在的 ./ 或 ../，即相对路径的情况。</li></ul><p><code>path.parse</code> 用于解析文件路径，将其拆分为一个对象。</p><p><code>path.sep</code> 返回当前系统文件路径使用的分隔符。</p><ul><li>例如在 Windows 操作系统上，path.sep 的值为反斜杠 \，而在 Unix 操作系统上则为正斜杠 /。</li></ul><h3 id="fs-文件系统" tabindex="-1"><a class="header-anchor" href="#fs-文件系统" aria-hidden="true">#</a> fs 文件系统</h3><p>fs (File system) 是文件系统模块，用于操作文件和目录。</p><p>支持同步 (sync) 或者异步 (async/callback) 调用，其中同步调用会阻塞主线程，异步调用不会阻塞。</p><p><code>fs.readFileSync</code> 读取文件。基础用法如下：</p><ul><li>参数 1：设置要读取的文件路径 (相对或者绝对)；</li><li>参数 2：设置读取的编码格式。</li></ul><p><code>fs.writeFileSync</code>：写入文件</p><ul><li>参数 1：输出文件路径；</li><li>参数 2：输出内容；</li><li>参数 3 (可选)：编码格式。</li></ul><p><code>fs.statSync</code> 获取文件或者目录的基本信息。</p><p><code>fs.appendFileSync</code> 向文件末尾追加写入内容。</p><p><code>fs.renameSync</code> 方法用于文件移动，当然也可以是重命名文件。</p><p><code>fs.unlinkSync 和 fs.rmSync</code> 都可用于单文件删除。</p><p><code>fs.readdirSync</code> 获取目录下的文件信息。可通过指定第二个参数 <code>withFileTypes:true</code> 使返回结果包含类型。</p><p><code>fs.mkdirSync</code> 创建目录，可通过设置 <code>recursive:true</code> 来递归创建多级目录。</p><p><code>fs.rmdirSync</code> 删除目标目录，<code>recursive: true</code> 表明删除包含其子目录。</p><p><code>fs.watch</code> 监听目录变更。</p><p><code>fs.readdirSync 和 path.resolve</code> 获取指定目录下所有文件的绝对路径。</p><h3 id="util-工具" tabindex="-1"><a class="header-anchor" href="#util-工具" aria-hidden="true">#</a> util 工具</h3><p>util 模块是一个工具模块，提供了一些常用的辅助函数。</p><p><code>util.inspect(object, [options])</code>，常与 console.log 搭配使用，可以友好的将对象转为字符串，打印更加友好。</p><p><code>util.inspect</code>，可以看到深层的数组和对象被展开了。其中 <code>depth</code> 用于控制展开的层级。</p><p><code>util.format(format[, ...args])</code> 类似于 C 语言中的使用 printf 方法的传参，</p><ul><li>该方法支持占位符 (%s、%d、%j 等) 来表示不同类型的变量，支持传入多个参数。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> util <span class="token keyword">from</span> <span class="token string">&#39;util&#39;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;%s:%s&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &#39;foo:bar&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;%d + %d = %d&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &#39;1 + 2 = 3&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>util.callbackify</code> 可以将一个返回 promise 的函数转为回调形式的函数。</p><p><code>util.promisify(original)</code> 用于将常规带有回调函数的方法转为返回 Promise 对象的方法。</p><h3 id="http-https" tabindex="-1"><a class="header-anchor" href="#http-https" aria-hidden="true">#</a> http / https</h3><p>http / https 模块可用于创建 HTTP 服务器，也可用于向已有服务发起请求并获取响应。</p><p><code>http.get</code> 用于快速发起 GET 请求</p><p><code>https.request</code> 用于 get、post、put、delete 等请求</p><p><code>http.createServer</code> 即可创建一个简单的 Web 服务。</p><p><code>http.request 和 http.response</code> 对象上常用的方法和属性的获取方式：</p><ul><li>request：<code>url</code> (请求路径)、<code>method</code> (请求方法)、<code>headers</code> (请求头部)、<code>body</code> (请求体)、<code>query</code> (url 携带查询参数)；</li><li>response：<code>statusCode</code> (响应状态码)、<code>setHeader</code> (设置响应头)、<code>write/end</code> (设置响应内容)。</li></ul><h3 id="child-process" tabindex="-1"><a class="header-anchor" href="#child-process" aria-hidden="true">#</a> child_process</h3><p>child_process 是 Node.js 的一个核心模块，可以用于创建子进程，</p><p>因此虽然 js 是单线程的，但通过创建子进程也能实现多任务并行处理，也可通过其调用系统的功能指令完成复杂的任务。</p><p>主要提供了 4 个方法：<code>spawn、exec、execFile 和 fork</code>。</p><ul><li><code>spawn</code> 启动一个子进程来执行指定的命令，并且可以通过流式数据通信与子进程进行交互；</li><li><code>exec</code> 启动一个 shell，并在 shell 中执行指定命令，执行完毕后插入 stdout/stderr 中，适用于一些命令行工具；</li><li><code>execFile</code> 与 exec 类似，但是可以直接执行某个文件，而无需通过 shell 执行；</li><li><code>fork</code> 专门用于在 Node.js 中衍生新的进程来执行 JavaScript 文件，并且建立一个与子进程的 IPC 通信管道。</li></ul><h3 id="url" tabindex="-1"><a class="header-anchor" href="#url" aria-hidden="true">#</a> url</h3><p><code>url.parse</code> 解析 URL 字符串，返回一个解析后的对象。</p><p><code>url.URL</code> 和全局的 URL 一样，创建一个 URL 实例，提供许多开箱即用的操作。</p><h3 id="timers" tabindex="-1"><a class="header-anchor" href="#timers" aria-hidden="true">#</a> Timers</h3><p><code>setTimeout(callback, delay[, ...args])</code> 在 delay 毫秒之后执行一次 callback</p><p><code>setInterval(callback, delay[, ...args])</code> 每隔 delay 毫秒执行一次 callback</p><p><code>setImmediate(callback[, ...args])</code> 在当前事件循环的下一个阶段执行 callback</p><p><code>process.nextTick(callback[, ...args])</code> 在当前事件循环结束后立即执行 callback</p><h3 id="readline" tabindex="-1"><a class="header-anchor" href="#readline" aria-hidden="true">#</a> Readline</h3><p>在 Node.js 中，readline 模块提供了一个接口，用于从可读流 (例如 process.stdin) 读取数据，并支持逐行读取数据。</p><p>① 使用 question() 方法向用户询问姓名并显示。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> readline <span class="token keyword">from</span> <span class="token string">&#39;readline&#39;</span>

<span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span>

rl<span class="token punctuation">.</span><span class="token function">question</span><span class="token punctuation">(</span><span class="token string">&#39;What is your name? &#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  rl<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>② 使用 write() 方法向标准输出发送数据。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> readline <span class="token keyword">from</span> <span class="token string">&#39;readline&#39;</span>

<span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span>

rl<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, World!\n&#39;</span><span class="token punctuation">)</span>
rl<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>③ 实现一个可多轮对话的命令行</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span> <span class="token comment">// 从标准输入流中读取数据</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdout <span class="token comment">// 输出数据到标准输出流中</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

rl<span class="token punctuation">.</span><span class="token function">setPrompt</span><span class="token punctuation">(</span><span class="token string">&#39;node&gt; &#39;</span><span class="token punctuation">)</span> <span class="token comment">// 设置提示符</span>
rl<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 显示提示符</span>

rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;line&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">line</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 监听行事件</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>
    line<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 去除收尾空白字符，进行简单的命令选择判断</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&#39;hello&#39;</span><span class="token operator">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 输出 &#39;world&#39;</span>
      <span class="token keyword">break</span>
    <span class="token keyword">case</span> <span class="token string">&#39;exit&#39;</span><span class="token operator">:</span>
      rl<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 关闭 readline 接口</span>
      <span class="token keyword">break</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Say what? I might have heard &#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">// 输出收到的指令</span>
      <span class="token keyword">break</span>
  <span class="token punctuation">}</span>
  rl<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 显示提示符</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;close&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 监听关闭事件</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Goodbye!&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 输出 &#39;Goodbye!&#39;</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 退出 Node.js 进程</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="crypto" tabindex="-1"><a class="header-anchor" href="#crypto" aria-hidden="true">#</a> crypto</h3><p>crypto 模块主要用于加密和解密数据，内置了一些常用的算法。</p><p><code>crypto.createHash(algorithm)</code>：创建一个新的<code>哈希算法</code>实例，其中 algorithm 是一个支持的哈希算法名称，例如 sha256 和 md5 等</p><ul><li><code>hash.update(data[, inputEncoding])</code>：更新哈希运算所使用的数据</li><li><code>hash.digest([encoding])</code>：计算并返回哈希值。如果提供了 encoding 参数，则返回字符串形式的哈希值；否则返回一个 Buffer 对象</li></ul><p><code>crypto.createCipheriv</code> 方法用于创建一个使用指定算法和密钥进行加密的 Cipher 对象，并指定初始化向量 iv。</p><p><code>crypto.randomBytes(size[, callback])</code>：生成具有给定大小的随机数据 (Buffer 类型)。</p><h2 id="node-中的-event-loop" tabindex="-1"><a class="header-anchor" href="#node-中的-event-loop" aria-hidden="true">#</a> node 中的 Event Loop</h2><h3 id="_6-个阶段" tabindex="-1"><a class="header-anchor" href="#_6-个阶段" aria-hidden="true">#</a> 6 个阶段</h3><p><img src="/images/backend/nodeeventloop.png" alt="nodeeventloop"></p><ul><li><code>timers (定时器)</code>：执行 <code>setTimeout</code> 和 <code>setInterval</code> 回调；</li><li><code>pending callbacks (挂起的回调)</code>：执行推迟到下一个循环迭代的 I/O 回调，比如 fs/http 模块执行的回调；</li><li><code>idle，prepare (空闲/准备)</code>：内部使用；</li><li><code>poll</code>：检索新的 I/O 事件；执行 I/O 相关的回调 (几乎是除关闭回调、定时器回调和 setImmediate 以外的回调)；在适当的时候节点将阻塞在这里；</li><li><code>check</code>：执行 setImmediate 回调 (Node.js 专有方法)；</li><li><code>close callbacks</code>：一些事件的关闭回调，例如 socket.on(&#39;close&#39;, ...)。</li></ul><h3 id="_2-个微任务队列" tabindex="-1"><a class="header-anchor" href="#_2-个微任务队列" aria-hidden="true">#</a> 2 个微任务队列</h3><p><code>nextTick 队列</code>：存储与 process.nextTick 函数相关的回调函数；</p><p><code>Promise 队列</code>：存储与 JavaScript 中的原生 Promise 相关的回调函数。</p><h2 id="ts-支持" tabindex="-1"><a class="header-anchor" href="#ts-支持" aria-hidden="true">#</a> ts 支持</h2><p>TypeScript 是当下最流行的变成语言之一，本节内容分类介绍了多种通过 Node.js 运行 TS 的方法：</p><ul><li>编译 TS 为 JS：tsc，ncc，tsup，bun；</li><li>Node.js 加载自定义文件支持：自定义 module.Module._extensions 支持；</li><li>支持运行 TS 的 Node CLI 工具：ts-node，tsx，swno；</li><li>其它的 TS 运行时：Deno，Bun。</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 15911122312@163.com">Rain9</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-f5876168.js" defer></script>
  </body>
</html>
