# WebGL

## 1. webgl 概述

WebGL（Web Graphics Library）是一种`用于在浏览器中渲染三维图形的 JavaScript API`。

它是在 HTML5 `<canvas>` 元素上的上下文中实现的，通过与 OpenGL ES 2.0 类似的接口，使得开发者可以在网页上利用 GPU 加速进行高性能的图形渲染。

**一些实际案例：**
- 3D数据可视化：cybermap.kaspersky.com/
- 家居卖场：showroom.littleworkshop.fr/
- 天猫宣传页：shrek.imdevsh.com/show/tmall/
- 汽车模型：ezshine.gitee.io/www/showcas…
- 趣空间：www.3dnest.cn/case/


浏览器有三大线程： js 引擎线程、GUI 渲染线程、浏览器事件触发线程。

其中 GUI 渲染线程就是用于渲图的，在这个渲染线程里，有负责不同渲染工作的工人。比如有负责渲染HTML+css的工人，有负责渲染二维图形的工人，有负责渲染三维图形的工人。

渲染二维图形的工人和渲染三维图形的工人不是一个国家的，他们说的语言不一样。

渲染二维图形的工人说的是js语言。

渲染三维图形的工人说的是GLSL ES 语言。

而我们在做web项目时，业务逻辑、交互操作都是用js 写的。

我们在用js 绘制canvas 2d 图形的时候，渲染二维图形的工人认识js 语言，所以它可以正常渲图。

但我们在用js 绘制webgl图形时，渲染三维图形的工人就不认识这个js 语言了，因为它只认识GLSL ES 语言。

因此，这个时候我们就需要找人翻译翻译。

这个做翻译的人是谁呢，它就是我们之前提到过的手绘板，它在webgl 里叫“程序对象”。

### 着色器的概念

webgl 绘图需要两种着色器：
- `顶点着色器（Vertex shader）`：描述顶点的特征，如位置、颜色等。
- `片元着色器（Fragment shader）`：进行逐片元处理，如光照。

`顶点着色器`：作用是计算顶点的位置，即提供顶点在裁剪空间中的坐标值
`片元着色器`：作用是计算图元的颜色值，我们可以将片元着色器大致理解成网页中的像素

看了这两个名词的解释，我想很多初学者会是懵的。

我给大家翻译翻译：

补间动画大家知道不？顶点着色器里的顶点就是补间动画里的关键帧，片元着色器里的片元就是关键帧之间以某种算法算出的插值。当然，咱们webgl里的片元是像素的意思。

再给大家举一个更简单、更贴切的例子：

两点决定一条直线大家知道不？顶点着色器里的顶点就是决定这一条直线的两个点，片元着色器里的片元就是把直线画到画布上后，这两个点之间构成直线的每个像素。
