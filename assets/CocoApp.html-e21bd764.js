import{_ as e,r as i,o as u,c as a,a as r,b as n,d as l,e as o}from"./app-f89883cd.js";const d={},p={href:"https://github.com/infinilabs/coco-app/package.json#L1-L6",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/infinilabs/coco-app/package.json#L62-L69",target:"_blank",rel:"noopener noreferrer"},g={href:"https://github.com/infinilabs/coco-app/package.json#L33-L48",target:"_blank",rel:"noopener noreferrer"},f={href:"https://github.com/infinilabs/coco-app/src-tauri/tauri.conf.json#L86-L101",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/infinilabs/coco-app/src-tauri/tauri.conf.json#L14-L95",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/infinilabs/coco-app/src/utils/tauriAdapter.ts",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/infinilabs/coco-app/src/utils/webAdapter.ts",target:"_blank",rel:"noopener noreferrer"},h={href:"https://github.com/infinilabs/coco-app/README.md#L51-L76",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/infinilabs/coco-app/src-tauri/tauri.conf.json#L14-L95",target:"_blank",rel:"noopener noreferrer"},S={href:"https://github.com/infinilabs/coco-app/src/types/platform.ts#L1-L142",target:"_blank",rel:"noopener noreferrer"},L={href:"https://github.com/infinilabs/coco-app/src-tauri/tauri.conf.json#L14-L95",target:"_blank",rel:"noopener noreferrer"},y={href:"https://github.com/infinilabs/coco-app/src-tauri/src/lib.rs#L89-L140",target:"_blank",rel:"noopener noreferrer"},A={href:"https://github.com/infinilabs/coco-app/tsup.config.ts#L32-L76",target:"_blank",rel:"noopener noreferrer"},q={href:"https://github.com/infinilabs/coco-app/src/components/SearchChat/index.tsx",target:"_blank",rel:"noopener noreferrer"},T={href:"https://github.com/infinilabs/coco-app/src/components/Search/Search.tsx",target:"_blank",rel:"noopener noreferrer"},P={href:"https://github.com/infinilabs/coco-app/src/hooks/useSearch.ts",target:"_blank",rel:"noopener noreferrer"},C={href:"https://github.com/infinilabs/coco-app/src/components/Assistant/Chat.tsx",target:"_blank",rel:"noopener noreferrer"},w={href:"https://github.com/infinilabs/coco-app/src/components/Search/AskAi.tsx",target:"_blank",rel:"noopener noreferrer"},R={href:"https://github.com/infinilabs/coco-app/src/types/platform.ts",target:"_blank",rel:"noopener noreferrer"},j={href:"https://github.com/infinilabs/coco-app/src/utils/tauriAdapter.ts",target:"_blank",rel:"noopener noreferrer"},W={href:"https://github.com/infinilabs/coco-app/src/utils/webAdapter.ts",target:"_blank",rel:"noopener noreferrer"},D={href:"https://github.com/infinilabs/coco-app/src-tauri/src/search/mod.rs#L22-L131",target:"_blank",rel:"noopener noreferrer"},I={href:"https://github.com/infinilabs/coco-app/src-tauri/src/server/datasource.rs#L112-L134",target:"_blank",rel:"noopener noreferrer"},U={href:"https://github.com/infinilabs/coco-app/src/components/Search/MCPPopover.tsx",target:"_blank",rel:"noopener noreferrer"},M={href:"https://github.com/infinilabs/coco-app/src-tauri/Cargo.toml#L1-L60",target:"_blank",rel:"noopener noreferrer"},B={href:"https://github.com/infinilabs/coco-app/src-tauri/src/lib.rs#L89-L140",target:"_blank",rel:"noopener noreferrer"},E={href:"https://github.com/infinilabs/coco-app/tsconfig.json#L1-L23",target:"_blank",rel:"noopener noreferrer"},K={href:"https://github.com/infinilabs/coco-app/src/stores/searchStore.ts",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://github.com/infinilabs/coco-app/src/stores/connectStore.ts",target:"_blank",rel:"noopener noreferrer"},H={href:"https://github.com/infinilabs/coco-app/vite.config.ts#L111-L170",target:"_blank",rel:"noopener noreferrer"},O={href:"https://github.com/infinilabs/coco-app/tsup.config.ts#L32-L76",target:"_blank",rel:"noopener noreferrer"},N={href:"https://github.com/infinilabs/coco-app/src-tauri/src/search/mod.rs#L199-L340",target:"_blank",rel:"noopener noreferrer"},V={href:"https://github.com/infinilabs/coco-app/src/hooks/useSearch.ts#L80-L174",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://github.com/infinilabs/coco-app/src/types/platform.ts#L1-L142",target:"_blank",rel:"noopener noreferrer"},F={href:"https://github.com/infinilabs/coco-app/src/utils/tauriAdapter.ts#L365-L383",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://github.com/infinilabs/coco-app/src-tauri/src/server/datasource.rs#L112-L134",target:"_blank",rel:"noopener noreferrer"},X={href:"https://github.com/infinilabs/coco-app/src/utils/webAdapter.ts#L271-L312",target:"_blank",rel:"noopener noreferrer"},G={href:"https://github.com/infinilabs/coco-app/tsup.config.ts#L32-L76",target:"_blank",rel:"noopener noreferrer"},z={href:"https://github.com/infinilabs/coco-app/src-tauri/tauri.conf.json#L96-L118",target:"_blank",rel:"noopener noreferrer"},J={href:"https://github.com/infinilabs/coco-app/src/api/tools.ts#L1-L19",target:"_blank",rel:"noopener noreferrer"},$={href:"https://github.com/infinilabs/coco-app/src/commands/servers.ts#L18-L36",target:"_blank",rel:"noopener noreferrer"},c={href:"https://github.com/infinilabs/coco-app/tsconfig.json#L1-L18",target:"_blank",rel:"noopener noreferrer"},_={href:"https://github.com/infinilabs/coco-app/tsup.config.ts#L32-L76",target:"_blank",rel:"noopener noreferrer"},tt={href:"https://github.com/infinilabs/coco-app/src-tauri/tauri.conf.json#L86-L171",target:"_blank",rel:"noopener noreferrer"},rt={href:"https://github.com/infinilabs/coco-app/src-tauri/tauri.conf.json#L14-L95",target:"_blank",rel:"noopener noreferrer"},nt={href:"https://github.com/infinilabs/coco-app/src-tauri/src/extension/mod.rs#L968-L1000",target:"_blank",rel:"noopener noreferrer"},st={href:"https://github.com/infinilabs/coco-app/src-tauri/src/extension/third_party/check.rs#L1-L23",target:"_blank",rel:"noopener noreferrer"},lt={href:"https://github.com/infinilabs/coco-app/src/utils/tauriAdapter.ts",target:"_blank",rel:"noopener noreferrer"},ot={href:"https://github.com/infinilabs/coco-app/src/components/SearchChat/index.tsx",target:"_blank",rel:"noopener noreferrer"},et={href:"https://github.com/infinilabs/coco-app/src-tauri/src/search/mod.rs",target:"_blank",rel:"noopener noreferrer"},it={href:"https://github.com/infinilabs/coco-app/src-tauri/src/extension/mod.rs",target:"_blank",rel:"noopener noreferrer"},ut={href:"https://github.com/infinilabs/coco-app/tsup.config.ts#L32-L76",target:"_blank",rel:"noopener noreferrer"},at={href:"https://github.com/infinilabs/coco-app/tsup.config.ts#L32-L76",target:"_blank",rel:"noopener noreferrer"},dt={href:"https://github.com/infinilabs/coco-app/tsup.config.ts#L32-L76",target:"_blank",rel:"noopener noreferrer"},pt={href:"https://github.com/infinilabs/coco-app/src-tauri/src/search/mod.rs#L22-L131",target:"_blank",rel:"noopener noreferrer"},bt={href:"https://github.com/infinilabs/coco-app/src/hooks/useSearch.ts#L80-L174",target:"_blank",rel:"noopener noreferrer"},gt={href:"https://github.com/infinilabs/coco-app/src/components/SearchChat/index.tsx",target:"_blank",rel:"noopener noreferrer"},ft={href:"https://github.com/infinilabs/coco-app/src/components/Search/Search.tsx",target:"_blank",rel:"noopener noreferrer"},mt={href:"https://github.com/infinilabs/coco-app/src/hooks/useSearch.ts",target:"_blank",rel:"noopener noreferrer"},vt={href:"https://github.com/infinilabs/coco-app/src/components/Assistant/Chat.tsx",target:"_blank",rel:"noopener noreferrer"},kt={href:"https://github.com/infinilabs/coco-app/src/components/Search/AskAi.tsx",target:"_blank",rel:"noopener noreferrer"},ht={href:"https://github.com/infinilabs/coco-app/src/types/platform.ts",target:"_blank",rel:"noopener noreferrer"},xt={href:"https://github.com/infinilabs/coco-app/src/utils/tauriAdapter.ts",target:"_blank",rel:"noopener noreferrer"},St={href:"https://github.com/infinilabs/coco-app/src/utils/webAdapter.ts",target:"_blank",rel:"noopener noreferrer"},Lt={href:"https://github.com/infinilabs/coco-app/src-tauri/src/search/mod.rs#L22-L131",target:"_blank",rel:"noopener noreferrer"},yt={href:"https://github.com/infinilabs/coco-app/tsup.config.ts#L32-L76",target:"_blank",rel:"noopener noreferrer"};function At(qt,t){const s=i("ExternalLinkIcon");return u(),a("div",null,[t[244]||(t[244]=r("h1",{id:"coco-app",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#coco-app","aria-hidden":"true"},"#"),n(" Coco App")],-1)),t[245]||(t[245]=r("blockquote",null,[r("p",null,"说明：本文档严格遵循“所有数字可溯源”原则——凡出现数字均在表格或附录中给出来源文件与可复现统计口径；若业务侧指标（用户规模、营收、留存、P99 等）未在仓库/监控中提供，则以“待补齐（含数据来源）”占位，避免不实或模糊表述。")],-1)),t[246]||(t[246]=r("h2",{id:"_0-项目概览-可溯源事实",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_0-项目概览-可溯源事实","aria-hidden":"true"},"#"),n(" 0. 项目概览（可溯源事实）")],-1)),r("table",null,[t[24]||(t[24]=r("thead",null,[r("tr",null,[r("th",null,"维度"),r("th",{style:{"text-align":"right"}},"数值"),r("th",null,"口径/来源")])],-1)),r("tbody",null,[r("tr",null,[t[1]||(t[1]=r("td",null,"项目版本",-1)),t[2]||(t[2]=r("td",{style:{"text-align":"right"}},"0.10.0",-1)),r("td",null,[r("a",p,[t[0]||(t[0]=n("package.json",-1)),l(s)])])]),r("tr",null,[t[4]||(t[4]=r("td",null,"前端框架",-1)),t[5]||(t[5]=r("td",{style:{"text-align":"right"}},"React 18（^18.3.1）",-1)),r("td",null,[r("a",b,[t[3]||(t[3]=n("package.json",-1)),l(s)])])]),r("tr",null,[t[7]||(t[7]=r("td",null,"桌面端框架",-1)),t[8]||(t[8]=r("td",{style:{"text-align":"right"}},"Tauri 2（@tauri-apps/api ^2.5.0）",-1)),r("td",null,[r("a",g,[t[6]||(t[6]=n("package.json",-1)),l(s)])])]),r("tr",null,[t[10]||(t[10]=r("td",null,"打包目标（桌面端）",-1)),t[11]||(t[11]=r("td",{style:{"text-align":"right"}},"6 种（nsis/dmg/app/appimage/deb/rpm）",-1)),r("td",null,[r("a",f,[t[9]||(t[9]=n("tauri.conf.json",-1)),l(s)])])]),r("tr",null,[t[13]||(t[13]=r("td",null,"多窗口形态（桌面端）",-1)),t[14]||(t[14]=r("td",{style:{"text-align":"right"}},"4 个窗口（main/settings/check/selection）",-1)),r("td",null,[r("a",m,[t[12]||(t[12]=n("tauri.conf.json",-1)),l(s)])])]),t[20]||(t[20]=r("tr",null,[r("td",null,"Tauri 命令数量"),r("td",{style:{"text-align":"right"}},[n("81 个 "),r("code",null,"#[tauri::command]"),n("（排除 "),r("code",null,"src-tauri/target"),n("）")]),r("td",null,"统计口径见“附录 A”")],-1)),t[21]||(t[21]=r("tr",null,[r("td",null,"Rust 单测数量"),r("td",{style:{"text-align":"right"}},[n("144 个 "),r("code",null,"#[test]"),n("（排除 "),r("code",null,"src-tauri/target"),n("）")]),r("td",null,"统计口径见“附录 A”")],-1)),t[22]||(t[22]=r("tr",null,[r("td",null,"前端组件规模"),r("td",{style:{"text-align":"right"}},[n("152 个 "),r("code",null,"src/components/**/*.tsx")]),r("td",null,"统计口径见“附录 A”")],-1)),t[23]||(t[23]=r("tr",null,[r("td",null,"状态仓库规模"),r("td",{style:{"text-align":"right"}},[n("14 个 "),r("code",null,"src/stores/**/*.ts"),n("（Zustand）")]),r("td",null,"统计口径见“附录 A”")],-1)),r("tr",null,[t[18]||(t[18]=r("td",null,"平台适配（前端）",-1)),t[19]||(t[19]=r("td",{style:{"text-align":"right"}},"2 套适配实现（Tauri/Web）",-1)),r("td",null,[r("a",v,[t[15]||(t[15]=n("tauriAdapter.ts",-1)),l(s)]),t[17]||(t[17]=n(" / ",-1)),r("a",k,[t[16]||(t[16]=n("webAdapter.ts",-1)),l(s)])])])])]),t[247]||(t[247]=r("hr",null,null,-1)),t[248]||(t[248]=r("h1",{id:"_1-项目背景与业务痛点-situation",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_1-项目背景与业务痛点-situation","aria-hidden":"true"},"#"),n(" 1. 项目背景与业务痛点（Situation）")],-1)),t[249]||(t[249]=r("h2",{id:"_1-1-行业-公司场景、用户规模、核心诉求",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_1-1-行业-公司场景、用户规模、核心诉求","aria-hidden":"true"},"#"),n(" 1.1 行业/公司场景、用户规模、核心诉求")],-1)),r("ul",null,[r("li",null,[t[26]||(t[26]=r("strong",null,"场景定位",-1)),t[27]||(t[27]=n("：跨平台桌面端与 Web 客户端，提供统一的**搜索（Search）",-1)),t[28]||(t[28]=r("strong",null,"与",-1)),t[29]||(t[29]=n("聊天（Chat）**入口，面向企业/个人知识工作流，强调私有化部署与数据主权（Data Sovereignty）。来源：",-1)),r("a",h,[t[25]||(t[25]=n("README.md",-1)),l(s)])]),r("li",null,[t[33]||(t[33]=r("strong",null,"核心诉求",-1)),t[34]||(t[34]=n("： ",-1)),r("ul",null,[t[32]||(t[32]=r("li",null,"单一入口同时覆盖“本地能力 + 企业数据源 + 联网 + AI 助手”，减少上下文切换成本。",-1)),r("li",null,[t[31]||(t[31]=n("在桌面端以小窗口/常驻形态提升可达性（包含多窗口管理与全局快捷键能力）。来源：",-1)),r("a",x,[t[30]||(t[30]=n("tauri.conf.json",-1)),l(s)])])])]),t[35]||(t[35]=r("li",null,[r("strong",null,"用户规模（待补齐）"),n("："),r("code",null,"待补齐：DAU/MAU/企业客户数（数据源：埋点/统计平台/BI）")],-1))]),t[250]||(t[250]=r("h2",{id:"_1-2-原有方案缺陷或技术瓶颈-量化口径",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_1-2-原有方案缺陷或技术瓶颈-量化口径","aria-hidden":"true"},"#"),n(" 1.2 原有方案缺陷或技术瓶颈（量化口径）")],-1)),t[251]||(t[251]=r("blockquote",null,[r("p",null,"仓库未直接提供“原方案指标（Latency/QPS/错误率）”的监控数据；以下痛点以“系统复杂度与跨端差异”作为可溯源量化口径，体现工程难度与治理价值。")],-1)),r("ul",null,[r("li",null,[t[37]||(t[37]=r("strong",null,"跨端差异治理压力",-1)),t[38]||(t[38]=n("：同一套 UI 需要同时支持桌面端（Tauri）与 Web，且平台能力差异显著（窗口管理、截图、权限、Updater、Deep Link 等）。平台能力入口抽象为统一适配层。来源：",-1)),r("a",S,[t[36]||(t[36]=n("types/platform.ts",-1)),l(s)])]),r("li",null,[t[40]||(t[40]=r("strong",null,"多窗口/多形态交互复杂",-1)),t[41]||(t[41]=n("：桌面端定义了 4 个窗口并包含置顶、透明、特定尺寸等约束，交互与生命周期管理成本高。来源：",-1)),r("a",L,[t[39]||(t[39]=n("tauri.conf.json",-1)),l(s)])]),r("li",null,[t[43]||(t[43]=r("strong",null,"后端命令面宽大",-1)),t[44]||(t[44]=n("：Rust 侧暴露 81 个 Tauri command（排除构建产物目录），意味着“前端—后端”接口治理、鉴权、错误处理、兼容性需要体系化能力。统计口径见“附录 A”；示例入口：",-1)),r("a",y,[t[42]||(t[42]=n("src-tauri/src/lib.rs",-1)),l(s)])]),t[45]||(t[45]=r("li",null,[r("strong",null,"功能面复杂度可量化"),n("：前端 "),r("code",null,"src/components"),n(" 下共有 152 个 TSX 组件、"),r("code",null,"src/stores"),n(" 下 14 个 Zustand store，若缺少模块化与规范，极易出现状态耦合、回归与维护成本飙升。统计口径见“附录 A”")],-1))]),t[252]||(t[252]=o('<hr><h1 id="_2-个人职责与目标-task" tabindex="-1"><a class="header-anchor" href="#_2-个人职责与目标-task" aria-hidden="true">#</a> 2. 个人职责与目标（Task）</h1><h2 id="_2-1-角色定位-选择其一并补充范围" tabindex="-1"><a class="header-anchor" href="#_2-1-角色定位-选择其一并补充范围" aria-hidden="true">#</a> 2.1 角色定位（选择其一并补充范围）</h2><ul><li>[ ] <strong>Owner</strong>：端到端负责（需求澄清 → 方案设计 → 研发交付 → 上线运营/回归 → 复盘）</li><li>[ ] <strong>核心贡献者（Core Contributor）</strong>：负责关键模块（跨端适配/搜索链路/扩展体系/构建发布等）</li><li>[ ] <strong>协作者（Contributor）</strong>：负责子模块与专项（组件库、i18n、性能调优、自动化等）</li></ul><h2 id="_2-2-可衡量-okr-kpi-建议表格化呈现" tabindex="-1"><a class="header-anchor" href="#_2-2-可衡量-okr-kpi-建议表格化呈现" aria-hidden="true">#</a> 2.2 可衡量 OKR/KPI（建议表格化呈现）</h2>',5)),r("table",null,[t[54]||(t[54]=r("thead",null,[r("tr",null,[r("th",null,"目标（Objective）"),r("th",null,"关键结果（Key Results）"),r("th",null,"基线（Baseline）"),r("th",null,"结果（Result）"),r("th",null,"数据来源（Source of Truth）")])],-1)),r("tbody",null,[t[51]||(t[51]=r("tr",null,[r("td",null,"提升搜索/聊天体验"),r("td",null,"P99 延迟（99th percentile latency）"),r("td",null,"待补齐"),r("td",null,"待补齐"),r("td",null,"待补齐：APM/日志/监控")],-1)),t[52]||(t[52]=r("tr",null,[r("td",null,"提升稳定性"),r("td",null,"崩溃率（Crash-free rate）/错误率（Error rate）"),r("td",null,"待补齐"),r("td",null,"待补齐"),r("td",null,"待补齐：Sentry/日志平台")],-1)),t[53]||(t[53]=r("tr",null,[r("td",null,"控制交付成本"),r("td",null,"版本交付周期（Lead time）"),r("td",null,"待补齐"),r("td",null,"待补齐"),r("td",null,"待补齐：迭代看板/CI")],-1)),r("tr",null,[t[47]||(t[47]=r("td",null,"降低跨端风险",-1)),t[48]||(t[48]=r("td",null,"Web SDK 产物无 Tauri 依赖泄露（hard gate）",-1)),t[49]||(t[49]=r("td",null,"无",-1)),t[50]||(t[50]=r("td",null,"有（构建失败即阻断）",-1)),r("td",null,[r("a",A,[t[46]||(t[46]=n("tsup.config.ts",-1)),l(s)])])])])]),t[253]||(t[253]=o(`<hr><h1 id="_3-关键技术方案与实现-action" tabindex="-1"><a class="header-anchor" href="#_3-关键技术方案与实现-action" aria-hidden="true">#</a> 3. 关键技术方案与实现（Action）</h1><h2 id="_3-1-架构设计-模块划分-跨端分层" tabindex="-1"><a class="header-anchor" href="#_3-1-架构设计-模块划分-跨端分层" aria-hidden="true">#</a> 3.1 架构设计（模块划分 + 跨端分层）</h2><h3 id="_3-1-1-总体架构图-mermaid" tabindex="-1"><a class="header-anchor" href="#_3-1-1-总体架构图-mermaid" aria-hidden="true">#</a> 3.1.1 总体架构图（Mermaid）</h3><div class="language-mermaid line-numbers-mode" data-ext="mermaid"><pre class="language-mermaid"><code><span class="token keyword">flowchart</span> TB
  U<span class="token text string">[&quot;User&quot;]</span> <span class="token arrow operator">--&gt;</span> UI<span class="token text string">[&quot;Search/Chat 统一入口 UI&quot;]</span>
  UI <span class="token arrow operator">--&gt;</span> SC<span class="token text string">[&quot;SearchChat 容器\\n(搜索/聊天模式切换)&quot;]</span>
  SC <span class="token arrow operator">--&gt;</span> S<span class="token text string">[&quot;Search 组件\\n建议/列表/详情/扩展视图&quot;]</span>
  SC <span class="token arrow operator">--&gt;</span> C<span class="token text string">[&quot;Chat 组件\\n流式消息/工具调用/引用结果&quot;]</span>

  S <span class="token arrow operator">--&gt;</span> ST<span class="token text string">[&quot;Zustand Stores\\n(searchStore/connectStore/...)&quot;]</span>
  C <span class="token arrow operator">--&gt;</span> ST

  S <span class="token arrow operator">--&gt;</span> PA<span class="token text string">[&quot;platformAdapter\\n(BasePlatformAdapter)&quot;]</span>
  C <span class="token arrow operator">--&gt;</span> PA

  PA <span class="token arrow operator">--&gt;</span><span class="token label property">|Desktop|</span> TA<span class="token text string">[&quot;Tauri Adapter\\ninvoke/commands/events/window&quot;]</span>
  PA <span class="token arrow operator">--&gt;</span><span class="token label property">|Web|</span> WA<span class="token text string">[&quot;Web Adapter\\nHTTP API 适配&quot;]</span>

  TA <span class="token arrow operator">--&gt;</span> RUST<span class="token text string">[&quot;Rust Backend (Tauri commands)&quot;]</span>
  RUST <span class="token arrow operator">--&gt;</span> SEARCH<span class="token text string">[&quot;Multi-source Search\\nquery_coco_fusion&quot;]</span>
  RUST <span class="token arrow operator">--&gt;</span> ASSIST<span class="token text string">[&quot;Assistant APIs\\nchat/assistant_search/...&quot;]</span>
  RUST <span class="token arrow operator">--&gt;</span> EXT<span class="token text string">[&quot;Extension System\\nbuilt-in/third-party&quot;]</span>
  WA <span class="token arrow operator">--&gt;</span> API<span class="token text string">[&quot;Web API\\n/query /chat /assistant /datasource /mcp_server&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-1-2-核心模块与入口-代码索引" tabindex="-1"><a class="header-anchor" href="#_3-1-2-核心模块与入口-代码索引" aria-hidden="true">#</a> 3.1.2 核心模块与入口（代码索引）</h3>`,6)),r("ul",null,[r("li",null,[t[56]||(t[56]=r("strong",null,"统一入口容器",-1)),t[57]||(t[57]=n("：搜索/聊天模式切换、窗口事件与输入控制：",-1)),r("a",q,[t[55]||(t[55]=n("SearchChat",-1)),l(s)])]),r("li",null,[t[60]||(t[60]=r("strong",null,"搜索体验",-1)),t[61]||(t[61]=n("：建议列表、结果列表、详情面板、扩展视图：",-1)),r("a",T,[t[58]||(t[58]=n("Search",-1)),l(s)]),t[62]||(t[62]=n("、",-1)),r("a",P,[t[59]||(t[59]=n("useSearch",-1)),l(s)])]),r("li",null,[t[65]||(t[65]=r("strong",null,"聊天体验（含流式步骤）",-1)),t[66]||(t[66]=n("：多阶段渲染（query_intent/tools/fetch_source/pick_source/deep_read/think/response）：",-1)),r("a",C,[t[63]||(t[63]=n("Chat",-1)),l(s)]),t[67]||(t[67]=n("、",-1)),r("a",w,[t[64]||(t[64]=n("AskAi",-1)),l(s)])]),r("li",null,[t[71]||(t[71]=r("strong",null,"跨端适配层",-1)),t[72]||(t[72]=n("：统一窗口/事件/系统能力与后端调用：",-1)),r("a",R,[t[68]||(t[68]=n("BasePlatformAdapter",-1)),l(s)]),t[73]||(t[73]=n("、",-1)),r("a",j,[t[69]||(t[69]=n("tauriAdapter",-1)),l(s)]),t[74]||(t[74]=n("、",-1)),r("a",W,[t[70]||(t[70]=n("webAdapter",-1)),l(s)])]),r("li",null,[t[76]||(t[76]=r("strong",null,"Rust 后端聚合搜索",-1)),t[77]||(t[77]=n("：多 query source 聚合、超时控制、参数约束与边界处理：",-1)),r("a",D,[t[75]||(t[75]=n("query_coco_fusion",-1)),l(s)])]),r("li",null,[t[80]||(t[80]=r("strong",null,"MCP/DataSource 搜索链路",-1)),t[81]||(t[81]=n("：前端统一调用 → 平台适配 → Rust command → Server API：",-1)),r("a",I,[t[78]||(t[78]=n("mcp_server_search",-1)),l(s)]),t[82]||(t[82]=n("、",-1)),r("a",U,[t[79]||(t[79]=n("MCPPopover",-1)),l(s)])])]),t[254]||(t[254]=r("h2",{id:"_3-2-技术选型理由-why-these-choices",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_3-2-技术选型理由-why-these-choices","aria-hidden":"true"},"#"),n(" 3.2 技术选型理由（Why these choices）")],-1)),r("ul",null,[r("li",null,[t[85]||(t[85]=r("strong",null,"Rust + Tauri 2",-1)),t[86]||(t[86]=n("：将性能敏感/系统级能力下沉到 Rust，提供更强的原生能力与更可控的资源占用；同时通过 Tauri command 暴露清晰的前后端边界。来源：",-1)),r("a",M,[t[83]||(t[83]=n("Cargo.toml",-1)),l(s)]),t[87]||(t[87]=n("、",-1)),r("a",B,[t[84]||(t[84]=n("src-tauri/src/lib.rs",-1)),l(s)])]),r("li",null,[t[89]||(t[89]=r("strong",null,"React 18 + TypeScript（strict）",-1)),t[90]||(t[90]=n("：用类型系统约束组件边界、Store 交互与平台适配接口，降低跨端与扩展场景下的回归风险。来源：",-1)),r("a",E,[t[88]||(t[88]=n("tsconfig.json",-1)),l(s)])]),r("li",null,[t[93]||(t[93]=r("strong",null,"Zustand",-1)),t[94]||(t[94]=n("：以轻量 Store 组织“连接/搜索/聊天/外观/快捷键”等横切状态，避免深层 props drilling。示例：",-1)),r("a",K,[t[91]||(t[91]=n("searchStore",-1)),l(s)]),t[95]||(t[95]=n("、",-1)),r("a",Q,[t[92]||(t[92]=n("connectStore",-1)),l(s)])]),r("li",null,[t[97]||(t[97]=r("strong",null,"Vite + 手动分包（manualChunks）",-1)),t[98]||(t[98]=n("：将 markdown/mermaid/icons/tauri-api 等拆分为独立 chunk，降低首屏负载并提高缓存命中。来源：",-1)),r("a",H,[t[96]||(t[96]=n("vite.config.ts",-1)),l(s)])]),r("li",null,[t[100]||(t[100]=r("strong",null,"Tsup（Web SDK 构建）",-1)),t[101]||(t[101]=n("：产出 ",-1)),t[102]||(t[102]=r("code",null,"@infinilabs/search-chat",-1)),t[103]||(t[103]=n("，并通过“产物无 Tauri 引用检测”作为硬门禁，保证 Web 侧可用与安全。来源：",-1)),r("a",O,[t[99]||(t[99]=n("tsup.config.ts",-1)),l(s)])])]),t[255]||(t[255]=r("h2",{id:"_3-3-难点攻克-关键工程问题-→-对应实现",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_3-3-难点攻克-关键工程问题-→-对应实现","aria-hidden":"true"},"#"),n(" 3.3 难点攻克（关键工程问题 → 对应实现）")],-1)),t[256]||(t[256]=r("h3",{id:"_3-3-1-多数据源聚合搜索-multi-source-fusion-search",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_3-3-1-多数据源聚合搜索-multi-source-fusion-search","aria-hidden":"true"},"#"),n(" 3.3.1 多数据源聚合搜索（Multi-source Fusion Search）")],-1)),r("ul",null,[t[116]||(t[116]=r("li",null,[r("strong",null,"问题"),n("：需要在一个请求中同时查询多个 query source（本地应用、书签、历史记录、远程数据源等），并在 200ms 内稳定返回结果；需解决“慢源拖累快源”与“结果公平性”问题。")],-1)),r("li",null,[t[114]||(t[114]=r("strong",null,"实现要点",-1)),t[115]||(t[115]=n("： ",-1)),r("ul",null,[r("li",null,[t[107]||(t[107]=r("strong",null,"Rust 后端并发与熔断",-1)),t[108]||(t[108]=n("： ",-1)),r("ul",null,[t[106]||(t[106]=o("<li>使用 <code>FuturesUnordered</code> 并发请求所有注册的 <code>QuerySource</code>，配合 <code>tokio::time::timeout</code> 对每个源实施独立熔断，确保单个慢源不阻塞整体响应。</li><li>实现“结果公平性算法”：在聚合阶段按 <code>score</code> 降序重排，并动态计算 <code>max_hits_per_source</code>（<code>size / n_sources</code>），防止某个高频源（如历史记录）挤占所有展示位。</li>",2)),r("li",null,[t[105]||(t[105]=n("来源：",-1)),r("a",N,[t[104]||(t[104]=n("search/mod.rs",-1)),l(s)])])])]),r("li",null,[t[112]||(t[112]=r("strong",null,"前端统一索引与交互",-1)),t[113]||(t[113]=n("： ",-1)),r("ul",null,[t[111]||(t[111]=o("<li><code>useSearch</code> 将聚合结果（<code>MultiSourceQueryResponse</code>）二次处理为三层结构： <ol><li><code>suggests</code>：按 score 全局排序的扁平列表（用于顶层展示）。</li><li><code>searchData</code>：按 <code>source.name</code> 分组的字典（用于分类渲染）。</li><li><code>globalItemIndexMap</code>：构建 <code>index -&gt; document</code> 的全局映射，支持跨分组的键盘上下键连续导航（无需处理分组边界）。</li></ol></li>",1)),r("li",null,[t[110]||(t[110]=n("来源：",-1)),r("a",V,[t[109]||(t[109]=n("useSearch",-1)),l(s)])])])])])])]),t[257]||(t[257]=r("h3",{id:"_3-3-2-mcp-datasource-统一检索-cross-platform-search-api",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_3-3-2-mcp-datasource-统一检索-cross-platform-search-api","aria-hidden":"true"},"#"),n(" 3.3.2 MCP/DataSource 统一检索（Cross-platform Search API）")],-1)),r("ul",null,[t[141]||(t[141]=r("li",null,[r("strong",null,"问题"),n("：桌面端需要通过 Tauri command 调用本地 Rust，Web 端需要直接走 HTTP API；但上层 UI 希望保持统一调用方式。")],-1)),r("li",null,[t[139]||(t[139]=r("strong",null,"实现要点",-1)),t[140]||(t[140]=n("： ",-1)),r("ul",null,[r("li",null,[t[118]||(t[118]=n("在 ",-1)),t[119]||(t[119]=r("code",null,"BasePlatformAdapter",-1)),t[120]||(t[120]=n(" 中抽象出 ",-1)),t[121]||(t[121]=r("code",null,"searchMCPServers/searchDataSources",-1)),t[122]||(t[122]=n(" 等方法，上层组件只依赖接口而不依赖平台细节。来源：",-1)),r("a",Z,[t[117]||(t[117]=n("types/platform.ts",-1)),l(s)])]),r("li",null,[t[125]||(t[125]=n("桌面端：适配层调用 ",-1)),t[126]||(t[126]=r("code",null,'commandWrapper.commands("mcp_server_search", ...)',-1)),t[127]||(t[127]=n("，最终进入 Rust 的 ",-1)),t[128]||(t[128]=r("code",null,"mcp_server_search",-1)),t[129]||(t[129]=n("，由 ",-1)),t[130]||(t[130]=r("code",null,"HttpClient",-1)),t[131]||(t[131]=n(" 请求 Coco Server。来源：",-1)),r("a",F,[t[123]||(t[123]=n("tauriAdapter.ts",-1)),l(s)]),t[132]||(t[132]=n("、",-1)),r("a",Y,[t[124]||(t[124]=n("datasource.rs",-1)),l(s)])]),r("li",null,[t[134]||(t[134]=n("Web 端：适配层直接 ",-1)),t[135]||(t[135]=r("code",null,"POST /mcp_server/_search",-1)),t[136]||(t[136]=n(" 与 ",-1)),t[137]||(t[137]=r("code",null,"POST /datasource/_search",-1)),t[138]||(t[138]=n("。来源：",-1)),r("a",X,[t[133]||(t[133]=n("webAdapter.ts",-1)),l(s)])])])])]),t[258]||(t[258]=r("h3",{id:"_3-3-3-质量门禁-web-sdk-产物不泄露桌面依赖-hard-gate",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_3-3-3-质量门禁-web-sdk-产物不泄露桌面依赖-hard-gate","aria-hidden":"true"},"#"),n(" 3.3.3 质量门禁：Web SDK 产物不泄露桌面依赖（Hard Gate）")],-1)),r("ul",null,[t[151]||(t[151]=r("li",null,[r("strong",null,"问题"),n("：同仓库既要构建桌面端，又要产出 Web SDK；若产物中残留 "),r("code",null,"@tauri-apps/*"),n(" 引用，Web 环境会直接崩溃且难以及时发现。")],-1)),r("li",null,[t[149]||(t[149]=r("strong",null,"实现要点",-1)),t[150]||(t[150]=n("： ",-1)),r("ul",null,[r("li",null,[t[143]||(t[143]=r("code",null,"tsup",-1)),t[144]||(t[144]=n(" 构建结束后扫描产物文件，若命中 ",-1)),t[145]||(t[145]=r("code",null,"@tauri-apps|tauri-plugin",-1)),t[146]||(t[146]=n(" 即直接 ",-1)),t[147]||(t[147]=r("code",null,"throw",-1)),t[148]||(t[148]=n("，使构建失败阻断发布。来源：",-1)),r("a",G,[t[142]||(t[142]=n("tsup.config.ts",-1)),l(s)])])])])]),t[259]||(t[259]=r("h2",{id:"_3-4-安全与合规-security-privacy",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_3-4-安全与合规-security-privacy","aria-hidden":"true"},"#"),n(" 3.4 安全与合规（Security & Privacy）")],-1)),r("ul",null,[r("li",null,[t[153]||(t[153]=r("strong",null,"桌面端 CSP（Content Security Policy）",-1)),t[154]||(t[154]=n("：在 Tauri 配置中设置 CSP，并开启 asset protocol scope 管控。来源：",-1)),r("a",z,[t[152]||(t[152]=n("tauri.conf.json",-1)),l(s)])]),r("li",null,[t[156]||(t[156]=r("strong",null,"鉴权 header 注入",-1)),t[157]||(t[157]=n("：在 Web 请求工具中从本地存储读取 headers 并合并到请求配置（需结合团队规范进一步治理/审计）。来源：",-1)),r("a",J,[t[155]||(t[155]=n("api/tools.ts",-1)),l(s)])]),r("li",null,[t[159]||(t[159]=r("strong",null,"接口白名单（无需登录）",-1)),t[160]||(t[160]=n("：对无需鉴权的后端 command 进行显式列举，降低误用面。来源：",-1)),r("a",$,[t[158]||(t[158]=n("servers.ts",-1)),l(s)])])]),t[260]||(t[260]=r("h2",{id:"_3-5-代码质量与工程化-可量化事实",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_3-5-代码质量与工程化-可量化事实","aria-hidden":"true"},"#"),n(" 3.5 代码质量与工程化（可量化事实）")],-1)),r("table",null,[t[170]||(t[170]=r("thead",null,[r("tr",null,[r("th",null,"维度"),r("th",null,"指标"),r("th",{style:{"text-align":"right"}},"数值"),r("th",null,"口径/来源")])],-1)),r("tbody",null,[r("tr",null,[t[162]||(t[162]=r("td",null,"TypeScript 质量门槛",-1)),t[163]||(t[163]=r("td",null,[r("code",null,"strict/noUnusedLocals/noUnusedParameters")],-1)),t[164]||(t[164]=r("td",{style:{"text-align":"right"}},"开启",-1)),r("td",null,[r("a",c,[t[161]||(t[161]=n("tsconfig.json",-1)),l(s)])])]),t[169]||(t[169]=r("tr",null,[r("td",null,"Rust 单测"),r("td",null,[r("code",null,"#[test]"),n(" 数量（排除 "),r("code",null,"src-tauri/target"),n("）")]),r("td",{style:{"text-align":"right"}},"144"),r("td",null,"统计口径见“附录 A”")],-1)),r("tr",null,[t[166]||(t[166]=r("td",null,"构建门禁",-1)),t[167]||(t[167]=r("td",null,"Web SDK 产物 Tauri 引用检测",-1)),t[168]||(t[168]=r("td",{style:{"text-align":"right"}},"启用（命中即失败）",-1)),r("td",null,[r("a",_,[t[165]||(t[165]=n("tsup.config.ts",-1)),l(s)])])])])]),t[261]||(t[261]=r("hr",null,null,-1)),t[262]||(t[262]=r("h1",{id:"_4-量化成果与业务价值-result",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_4-量化成果与业务价值-result","aria-hidden":"true"},"#"),n(" 4. 量化成果与业务价值（Result）")],-1)),t[263]||(t[263]=r("h2",{id:"_4-1-可溯源交付成果-engineering-deliverables",tabindex:"-1"},[r("a",{class:"header-anchor",href:"#_4-1-可溯源交付成果-engineering-deliverables","aria-hidden":"true"},"#"),n(" 4.1 可溯源交付成果（Engineering Deliverables）")],-1)),r("ul",null,[r("li",null,[t[172]||(t[172]=r("strong",null,"跨平台交付能力",-1)),t[173]||(t[173]=n("：桌面端支持 6 种打包目标（Windows/macOS/Linux 多制品），并内置 Updater 与 Deep Link 等能力。来源：",-1)),r("a",tt,[t[171]||(t[171]=n("tauri.conf.json",-1)),l(s)])]),r("li",null,[t[175]||(t[175]=r("strong",null,"多窗口产品形态",-1)),t[176]||(t[176]=n("：定义 4 个窗口并对“置顶/透明/固定尺寸/特效”等进行精细化配置，支撑“常驻搜索框 + 设置 + 更新 + 选区”等体验。来源：",-1)),r("a",rt,[t[174]||(t[174]=n("tauri.conf.json",-1)),l(s)])]),r("li",null,[t[179]||(t[179]=r("strong",null,"扩展体系可插拔",-1)),t[180]||(t[180]=n("：Rust 侧存在 built-in 与 third-party 扩展的校验与兼容性判断逻辑，为后续生态化（Extensions）提供基础。来源：",-1)),r("a",nt,[t[177]||(t[177]=n("extension/mod.rs",-1)),l(s)]),t[181]||(t[181]=n("、",-1)),r("a",st,[t[178]||(t[178]=n("check.rs",-1)),l(s)])])]),t[264]||(t[264]=o('<h2 id="_4-2-业务指标对比-需补齐-禁止模糊" tabindex="-1"><a class="header-anchor" href="#_4-2-业务指标对比-需补齐-禁止模糊" aria-hidden="true">#</a> 4.2 业务指标对比（需补齐，禁止模糊）</h2><table><thead><tr><th>指标</th><th style="text-align:right;">上线前（Before）</th><th style="text-align:right;">上线后（After）</th><th style="text-align:right;">变化（Delta）</th><th>数据来源</th></tr></thead><tbody><tr><td>P99 搜索延迟（ms）</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td>待补齐：APM</td></tr><tr><td>P99 聊天首 token 延迟（ms）</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td>待补齐：链路追踪</td></tr><tr><td>QPS（Queries Per Second）</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td>待补齐：网关/服务监控</td></tr><tr><td>错误率（Error rate）</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td>待补齐：Sentry/日志</td></tr><tr><td>留存（Retention）</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td style="text-align:right;">待补齐</td><td>待补齐：埋点/BI</td></tr></tbody></table><h2 id="_4-3-成本节约-需补齐" tabindex="-1"><a class="header-anchor" href="#_4-3-成本节约-需补齐" aria-hidden="true">#</a> 4.3 成本节约（需补齐）</h2><table><thead><tr><th>成本项</th><th>量化口径</th><th>结果</th><th>数据来源</th></tr></thead><tbody><tr><td>服务器成本</td><td>CPU/内存/带宽/月</td><td>待补齐</td><td>待补齐：云账单</td></tr><tr><td>人力运维</td><td>oncall 工时/故障次数</td><td>待补齐</td><td>待补齐：工单系统</td></tr><tr><td>交付周期</td><td>需求→上线 Lead time</td><td>待补齐</td><td>待补齐：迭代看板</td></tr></tbody></table><hr><h1 id="_5-个人成长与复盘" tabindex="-1"><a class="header-anchor" href="#_5-个人成长与复盘" aria-hidden="true">#</a> 5. 个人成长与复盘</h1><h2 id="_5-1-技术成长-tech-growth" tabindex="-1"><a class="header-anchor" href="#_5-1-技术成长-tech-growth" aria-hidden="true">#</a> 5.1 技术成长（Tech Growth）</h2>',7)),r("ul",null,[r("li",null,[t[184]||(t[184]=r("strong",null,"跨端工程能力",-1)),t[185]||(t[185]=n("：熟悉 Tauri 2（窗口/事件/插件/Updater/Deep Link）与 React 18 的协作边界，形成“平台能力适配层”设计方法论。参考：",-1)),r("a",lt,[t[182]||(t[182]=n("tauriAdapter.ts",-1)),l(s)]),t[186]||(t[186]=n("、",-1)),r("a",ot,[t[183]||(t[183]=n("SearchChat",-1)),l(s)])]),r("li",null,[t[189]||(t[189]=r("strong",null,"Rust 工程实践",-1)),t[190]||(t[190]=n("：围绕 command 边界、超时控制、扩展系统与测试组织进行实战。参考：",-1)),r("a",et,[t[187]||(t[187]=n("search/mod.rs",-1)),l(s)]),t[191]||(t[191]=n("、",-1)),r("a",it,[t[188]||(t[188]=n("extension/mod.rs",-1)),l(s)])]),r("li",null,[t[193]||(t[193]=r("strong",null,"工程化与发布治理",-1)),t[194]||(t[194]=n("：通过 tsup 产物扫描把“跨端依赖泄露”从线上问题前置为构建失败，提高发布确定性。参考：",-1)),r("a",ut,[t[192]||(t[192]=n("tsup.config.ts",-1)),l(s)])])]),t[265]||(t[265]=o('<h2 id="_5-2-软技能-collaboration" tabindex="-1"><a class="header-anchor" href="#_5-2-软技能-collaboration" aria-hidden="true">#</a> 5.2 软技能（Collaboration）</h2><ul><li><strong>跨团队协作模板（可直接使用）</strong>： <ul><li>需求澄清：用“输入→输出→非目标（Non-goals）→验收标准（Acceptance Criteria）”四段式对齐。</li><li>风险管理：对“跨端差异/权限/升级/兼容性/回滚”建立 checklist，与 QA/运维提前对齐。</li><li>知识传承：对核心链路（搜索聚合/平台适配/扩展安装校验）输出架构图与排障手册（链接到内部 Confluence/飞书文档：待补齐）。</li></ul></li></ul><h2 id="_5-3-复盘改进-lessons-learned" tabindex="-1"><a class="header-anchor" href="#_5-3-复盘改进-lessons-learned" aria-hidden="true">#</a> 5.3 复盘改进（Lessons Learned）</h2>',3)),r("ul",null,[r("li",null,[t[203]||(t[203]=r("strong",null,"踩坑记录（示例模板）",-1)),t[204]||(t[204]=n("： ",-1)),r("ul",null,[t[200]||(t[200]=r("li",null,[n("现象："),r("code",null,"待补齐：例如 Web SDK 产物在浏览器报 @tauri-apps/api 找不到")],-1)),t[201]||(t[201]=r("li",null,[n("根因："),r("code",null,"待补齐：构建未剔除 Tauri 依赖")],-1)),r("li",null,[t[196]||(t[196]=n("修复：",-1)),t[197]||(t[197]=r("code",null,"tsup onSuccess 扫描产物并阻断发布",-1)),t[198]||(t[198]=n("（见 ",-1)),r("a",at,[t[195]||(t[195]=n("tsup.config.ts",-1)),l(s)]),t[199]||(t[199]=n("）",-1))]),t[202]||(t[202]=r("li",null,[n("预防："),r("code",null,"把跨端差异抽象为 platformAdapter 接口 + CI 门禁")],-1))])])]),t[266]||(t[266]=o('<hr><h1 id="_6-面试话术锦囊" tabindex="-1"><a class="header-anchor" href="#_6-面试话术锦囊" aria-hidden="true">#</a> 6. 面试话术锦囊</h1><h2 id="_6-1-30-秒电梯陈述-可直接背诵" tabindex="-1"><a class="header-anchor" href="#_6-1-30-秒电梯陈述-可直接背诵" aria-hidden="true">#</a> 6.1 30 秒电梯陈述（可直接背诵）</h2><p>我负责/主导 Coco App 的跨端搜索与聊天入口工程化落地：在 React 18 + TypeScript + Tauri 2 的栈上，通过平台适配层把桌面端能力与 Web API 统一封装，并在 Rust 侧提供多数据源聚合搜索与扩展系统支撑。项目桌面端配置了 4 个窗口形态并支持 6 种打包目标；仓库侧有 152 个前端组件与 81 个 Tauri command 的规模，我重点解决了跨端差异治理与发布确定性问题，例如在 Web SDK 构建中加入“产物不得包含 Tauri 引用”的硬门禁，直接把潜在线上崩溃前置为构建失败。</p><h2 id="_6-2-3-分钟亮点展开-按-star-讲述" tabindex="-1"><a class="header-anchor" href="#_6-2-3-分钟亮点展开-按-star-讲述" aria-hidden="true">#</a> 6.2 3 分钟亮点展开（按 STAR 讲述）</h2><ul><li><strong>S（Situation）</strong>：统一入口要同时覆盖搜索与聊天，并在桌面端提供常驻小窗体验；同时还要输出 Web SDK，跨端差异大且回归风险高（4 窗口、81 command、152 组件规模）。</li><li><strong>T（Task）</strong>：把跨端差异收敛到可维护的分层架构；实现多数据源聚合搜索链路；建立工程化门禁提升发布确定性。（业务指标按你所在团队补齐：P99/错误率/留存等）</li><li><strong>A（Action）</strong>： <ul><li>设计 <code>BasePlatformAdapter</code>，实现 Tauri/Web 两套适配；上层 UI 统一调用（MCP/DataSource/Assistant 等）。</li><li>Rust 侧提供 <code>query_coco_fusion</code>，支持 querysource/datasource 等参数组合，并提供超时预算控制。</li><li>Web SDK 构建引入产物扫描，命中 <code>@tauri-apps|tauri-plugin</code> 直接失败，防止跨端依赖泄露。</li></ul></li><li><strong>R（Result）</strong>：跨平台可交付（6 种桌面端产物、4 个窗口形态）；工程质量门禁可复现；业务效果（P99/QPS/错误率/留存）可按监控数据补齐到表格中。</li></ul><h2 id="_6-3-常见追问-数据佐证回答模板" tabindex="-1"><a class="header-anchor" href="#_6-3-常见追问-数据佐证回答模板" aria-hidden="true">#</a> 6.3 常见追问 &amp; 数据佐证回答模板</h2>',7)),r("table",null,[t[223]||(t[223]=r("thead",null,[r("tr",null,[r("th",null,"追问"),r("th",null,"回答要点模板（把括号内替换为真实数据/链接）")])],-1)),r("tbody",null,[r("tr",null,[t[210]||(t[210]=r("td",null,"你怎么保证 Web 产物不依赖 Tauri？",-1)),r("td",null,[t[206]||(t[206]=n("“我在构建完成后扫描产物，若包含 ",-1)),t[207]||(t[207]=r("code",null,"@tauri-apps、tauri-plugin",-1)),t[208]||(t[208]=n(" 就直接失败阻断发布，避免线上才发现。实现见 ",-1)),r("a",dt,[t[205]||(t[205]=n("tsup.config.ts",-1)),l(s)]),t[209]||(t[209]=n("，复现实验命令见附录 A。”",-1))])]),r("tr",null,[t[220]||(t[220]=r("td",null,"多数据源聚合搜索怎么做超时与降级？",-1)),r("td",null,[t[213]||(t[213]=n("“Rust 侧 ",-1)),t[214]||(t[214]=r("code",null,"query_coco_fusion",-1)),t[215]||(t[215]=n(" 接收 ",-1)),t[216]||(t[216]=r("code",null,"query_timeout",-1)),t[217]||(t[217]=n(" 作为预算，并对参数组合进行约束校验；前端再对结果进行排序与分组以稳定渲染。实现入口见 ",-1)),r("a",pt,[t[211]||(t[211]=n("search/mod.rs",-1)),l(s)]),t[218]||(t[218]=n("，前端整理逻辑见 ",-1)),r("a",bt,[t[212]||(t[212]=n("useSearch",-1)),l(s)]),t[219]||(t[219]=n("。”",-1))])]),t[221]||(t[221]=r("tr",null,[r("td",null,"你怎么控制大规模组件与状态的复杂度？"),r("td",null,"“用 TypeScript strict 约束边界，Zustand 按域拆分 Store（共 14 个），并把跨端能力封装为 platformAdapter；规模数据与口径见附录 A（152 TSX 组件、14 stores）。”")],-1)),t[222]||(t[222]=r("tr",null,[r("td",null,"有哪些可量化收益？"),r("td",null,"“工程交付侧可量化：桌面端 6 种产物、4 窗口形态、81 command 接口面宽、144 Rust 单测；业务侧我会用表格给出 P99/错误率/留存等对比，并附 APM/监控链接作为来源（见第 4.2）。”")],-1))])]),t[267]||(t[267]=o(`<hr><h1 id="附录-a-统计口径与可复现命令-确保数字可溯源" tabindex="-1"><a class="header-anchor" href="#附录-a-统计口径与可复现命令-确保数字可溯源" aria-hidden="true">#</a> 附录 A：统计口径与可复现命令（确保数字可溯源）</h1><blockquote><p>统计时间：2026-02-27；统计范围：仓库工作区；Rust 统计排除 <code>src-tauri/target</code>。</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 统计前端规模（组件/Store/Hook/Utils）</span>
python3 - <span class="token operator">&lt;&lt;</span><span class="token string">&#39;PY&#39;
import glob, json
counts = {
  &quot;stores_ts_files&quot;: len(glob.glob(&quot;src/stores/**/*.ts&quot;, recursive=True)),
  &quot;components_tsx_files&quot;: len(glob.glob(&quot;src/components/**/*.tsx&quot;, recursive=True)),
  &quot;hooks_ts_files&quot;: len(glob.glob(&quot;src/hooks/**/*.ts&quot;, recursive=True)),
  &quot;utils_ts_files&quot;: len(glob.glob(&quot;src/utils/**/*.ts&quot;, recursive=True)),
}
print(json.dumps(counts, ensure_ascii=False, indent=2))
PY</span>

<span class="token comment"># 统计 Rust 侧 Tauri command 与单测数量（排除 src-tauri/target）</span>
python3 - <span class="token operator">&lt;&lt;</span><span class="token string">&#39;PY&#39;
import json, re
from pathlib import Path
root = Path(&quot;src-tauri&quot;)
def iter_rs():
  for p in root.rglob(&quot;*.rs&quot;):
    if &quot;src-tauri/target/&quot; in str(p):
      continue
    yield p

tauri_cmd = 0
tests = 0
files_with_tests = 0
for p in iter_rs():
  txt = p.read_text(encoding=&quot;utf-8&quot;, errors=&quot;ignore&quot;)
  tauri_cmd += len(re.findall(r&quot;#[\\\\[]tauri::command\\\\]&quot;, txt))
  c = len(re.findall(r&quot;\\\\#\\\\[test\\\\]&quot;, txt))
  if c:
    files_with_tests += 1
    tests += c

print(json.dumps({
  &quot;tauri_command_annotations_rs_excluding_target&quot;: tauri_cmd,
  &quot;rust_test_annotations_excluding_target&quot;: tests,
  &quot;rust_files_with_tests_excluding_target&quot;: files_with_tests,
}, ensure_ascii=False, indent=2))
PY</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="附录-b-关键代码索引-面试现场快速定位" tabindex="-1"><a class="header-anchor" href="#附录-b-关键代码索引-面试现场快速定位" aria-hidden="true">#</a> 附录 B：关键代码索引（面试现场快速定位）</h1>`,5)),r("ul",null,[r("li",null,[t[225]||(t[225]=n("统一入口容器：",-1)),r("a",gt,[t[224]||(t[224]=n("SearchChat",-1)),l(s)])]),r("li",null,[t[228]||(t[228]=n("搜索主链路：",-1)),r("a",ft,[t[226]||(t[226]=n("Search",-1)),l(s)]),t[229]||(t[229]=n("、",-1)),r("a",mt,[t[227]||(t[227]=n("useSearch",-1)),l(s)])]),r("li",null,[t[232]||(t[232]=n("聊天主链路：",-1)),r("a",vt,[t[230]||(t[230]=n("Chat",-1)),l(s)]),t[233]||(t[233]=n("、",-1)),r("a",kt,[t[231]||(t[231]=n("AskAi",-1)),l(s)])]),r("li",null,[t[237]||(t[237]=n("平台适配层：",-1)),r("a",ht,[t[234]||(t[234]=n("BasePlatformAdapter",-1)),l(s)]),t[238]||(t[238]=n("、",-1)),r("a",xt,[t[235]||(t[235]=n("tauriAdapter",-1)),l(s)]),t[239]||(t[239]=n("、",-1)),r("a",St,[t[236]||(t[236]=n("webAdapter",-1)),l(s)])]),r("li",null,[t[241]||(t[241]=n("Rust 聚合搜索入口：",-1)),r("a",Lt,[t[240]||(t[240]=n("query_coco_fusion",-1)),l(s)])]),r("li",null,[t[243]||(t[243]=n("Web SDK 构建门禁：",-1)),r("a",yt,[t[242]||(t[242]=n("tsup.config.ts",-1)),l(s)])])])])}const Pt=e(d,[["render",At],["__file","CocoApp.html.vue"]]);export{Pt as default};
